<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
	<title>WCF TCP-based File Server - CodeProject</title> 
	<link type="text/css" rel="stylesheet" href="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/Main.css">

	
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Description" content="Shows you how to implement a remote file repository using WCF.; Author: StevenHobbs; Updated: 2 Mar 2009; Section: Windows Communication Foundation; Chapter: Platforms, Frameworks &amp; Libraries; Updated: 2 Mar 2009">
<meta name="Keywords" content=".NET3.0, .NET3.5, C#, Windows, Architect, Dev, WCF, Beginner, Intermediate,Windows Communication Foundation,Platforms, Frameworks &amp; Libraries,Free source code, tutorials">
<meta name="Author" content="StevenHobbs">
<meta name="Rating" content="General">
<meta name="Robots" content="index, follow, NOODP">
<meta name="Revisit-After" content="1 days">
<meta name="application-name" content="CodeProject">

<link rel="dns-prefetch" href="http://ajax.googleapis.com/"> 
<link rel="canonical" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server">


<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - All Topics" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=1">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - Android" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=22">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - MFC/C++" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=2">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - C#" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=3">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - VB.NET" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=6">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - Mobile" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=18">
<link rel="alternate" type="application/rss+xml" title="CodeProject Lounge Postings" href="http://www.codeproject.com/webservices/LoungeRSS.aspx">
<link rel="search" type="application/opensearchdescription+xml" title="CodeProject" href="http://www.codeproject.com/info/OpenSearch.xml">

	<!-- base href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server" -->
	<link rel="icon" href="http://www.codeproject.com/favicon.ico" type="image/ico">
<link rel="shortcut icon" href="http://www.codeproject.com/favicon.ico" type="image/ico">
<link rel="apple-touch-icon" href="http://www.codeproject.com/images/FavIcon-Apple.png" type="image/png">
<script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/widgets.js" id="twitter-wjs"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/plusone.js" async="" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/all.txt" id="facebook-jssdk"></script><script type="text/javascript" language="Javascript">//<![CDATA[
function defrm () { /* thanks twitter */ document.write = ''; window.top.location = window.self.location;  setTimeout(function() { document.body.innerHTML = ''; }, 0);  window.self.onload = function(evt) { document.body.innerHTML = ''; }; }if (window.top !== window.self) {  try {  if (window.top.location.host) { /* will throw */ } else { defrm(); /* chrome */ }  } catch (ex) { defrm(); /* everyone else */ } }if (typeof(DemoUrl)!='undefined')   document.write(unescape('%3Cme')+'ta http'+'-equiv="re'+'fresh"                  con'+'tent="1;url='+DemoUrl+unescape('"%3CE'));
function _dmBootstrap(file) { var _dma = document.createElement('script');  _dma.type = 'text/javascript'; _dma.async = true;  _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);}
function _dmFollowup(file) { if (typeof DMAds === 'undefined')  _dmBootstrap('cdn2.developermedia.com/a.min.js?dt=2.7.131219.1');}
(function () { _dmBootstrap('cdn1.developermedia.com/a.min.js?dt=2.7.131219.1'); setTimeout(_dmFollowup, 2000);})();

//]]>
</script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/a_002.js" async="" type="text/javascript"></script>

	




<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-1735123-1']);
	_gaq.push(['_trackPageview']);
	_gaq.push(['_setDomainName', 'www.codeproject.com']);
	_gaq.push(['_setSessionTimeout', '1200']); 

	(function () {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})(); 
</script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/ga.js" async="" type="text/javascript"></script>


<script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/a.js" async="" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/sf_main.htm" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/javascript.js" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/client" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/affiliate_client.js" id="jw_00" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/sf_preloader.jsp" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/sf_code.jsp" type="text/javascript"></script><script src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/base_single_icon.js" type="text/javascript"></script></head>	

<body data-twttr-rendered="true" class="firefox firefox26">

<a href="#Main"><img alt="Click here to Skip to main content" class="access-link" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t.gif"></a>





<div class="page-background">

	
	

	

	<table id="ctl00_Bn" style="width:100%;height:135px" class="banner fixed" cellpadding="0" cellspacing="0">
	<tbody><tr valign="bottom">
		<td class="blank-background" style="height:31px">&nbsp;</td>
		<td class="blank-background" rowspan="3" style="width:250px;height:135px"><a href="http://www.codeproject.com/"><img id="ctl00_Logo" tabindex="1" title="CodeProject" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/logo250x135.gif" alt="Home" style="height:135px;width:250px;border-width:0px;"></a></td>
		<td class="blank-background align-right" style="width:728px;height:31px">

<div class="container memberbar clearfix">

	<div id="ctl00_MemberMenu_GenInfo" class="float-left">10,290,359 members (64,490 online) &nbsp; &nbsp; </div>

	<div class="float-left">
		
	</div>

	<div class="float-right">

		

		

		

			<script type="text/javascript">//<!--
			function doSubmit(secure)
			{
				if (secure)
					document.subForm.action = "https://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server"
				else
					document.subForm.action = "https://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server"
				document.subForm.submit();
				return true;
			}//-->
			</script>

			<a name="SignUp"></a>
			<span class="member-signin tooltip">
				<span><a href="https://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign in</a></span>

				<div class="tooltip-flyout">
					<form name="subForm" id="subForm" action="https://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server" method="post" class="tight">

						
						<input id="FormName" name="FormName" value="MenuBarForm" type="hidden">

						<div>Email</div>
						<div><input class="small-text" name="Email" id="Email" type="email"></div>
						<div>Password</div>
						<div><input class="small-text" name="Password" id="Password" type="password"></div>
						<div class="action">
							
<script type="text/javascript">
function Join(){
 var url = 'http://www.codeproject.com/script/Membership/Modify.aspx?meml=' + document.subForm.Email.value;
 document.location.href=url;return false;
}
document.write('<input type="button" class="create"   onclick="return Join();" value="Join"');
document.write('<input type="hidden" name="fld_quicksign"   value="true" />');
</script><input class="create" onclick="return Join();" value="Join" <input="" name="fld_quicksign" type="button">
							<input value="Sign in" class="signin" onclick="return doSubmit(false);" type="submit">
						</div>

						<div class="container">
							
							&nbsp;
							<a id="ctl00_MemberMenu_SendPassword" class="forgot float-right" href="http://www.codeproject.com/script/Membership/SendPassword.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Forgot your password?</a>
						</div>
					</form>

					<hr class="divider-dark">

					Sign in using <a class="oauth" title="Sign in using Facebook" href="http://www.codeproject.com/script/Membership/OAuthLogOn.aspx?auth=Facebook"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/facebook.png" style="vertical-align:middle;padding-right:3px;border:0;"></a>
<a class="oauth" title="Sign in using Google" href="http://www.codeproject.com/script/Membership/OAuthLogOn.aspx?auth=Google"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/google-plus.png" style="vertical-align:middle;padding-right:3px;border:0;"></a>
<a class="oauth" title="Sign in using Linkedin" href="http://www.codeproject.com/script/Membership/OAuthLogOn.aspx?auth=LinkedIn"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/linkedin.png" style="vertical-align:middle;padding-right:3px;border:0;"></a>

				</div>
		
	</span></div>
</div></td>
		<td class="blank-background" style="height:31px">&nbsp;</td>
	</tr>
	<tr valign="middle">
		<td class="theme1-background" style="height:94px">&nbsp;</td>
		<td class="theme1-background ad"><div class="msg-728x90" data-format="728x90" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="ros" data-tags=".NET3.0, .NET3.5, C#, Windows, Architect, Dev, WCF, Beginner, Intermediate,rating4.5"></div></td>
		<td class="theme1-background" style="height:94px">&nbsp;</td>
	</tr>
	<tr valign="top">
		<td style="height: 10px;"></td>
		<td style="height: 10px;" class="blank-background"></td>
		<td style="height: 10px;"></td>
	</tr>
</tbody></table>


	<a href="#Main"><img alt="Click here to Skip to main content" class="access-link" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t.gif"></a>

	
	<div id="ctl00_TPR" class="sub-headerbar fixed">
	<table class="extended" cellpadding="0" cellspacing="0"><tbody><tr><td nowrap="nowrap">
		

<div class="navbar clearfix">
<ul class="navmenu openable">

<li><a id="ctl00_TopNavBar_Home" href="http://www.codeproject.com/">home</a>


</li><li class=""><a id="ctl00_TopNavBar_Art" class="down selected" href="http://www.codeproject.com/script/Articles/Latest.aspx">articles</a>

	<ul>
		<li class=""><a id="ctl00_TopNavBar_ArtTopicList" class="fly" onmouseover="navBarMenu.ShowMap(this, 'ctl00_TopNavBar_MapFlyout');" href="http://www.codeproject.com/script/Content/SiteMap.aspx">Chapters and Sections<span class="has-submenu">&gt;</span></a><ul id="ctl00_TopNavBar_MapFlyout">
			<li>
				<div id="siteMap">
					<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/animated.gif" alt="loading" style="margin:150px;width:100px;height:100px;">
				</div>
			</li>
			</ul>
		</li>
		<li><a id="ctl00_TopNavBar_ArtSearch" class="fly break" href="http://www.codeproject.com/search.aspx">Search</a></li>
		<li><a id="ctl00_TopNavBar_ArtLatestArts" class="fly" href="http://www.codeproject.com/script/Articles/Latest.aspx?at=1,3,7">Latest Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtLatestTips" class="fly" href="http://www.codeproject.com/script/Articles/Latest.aspx?at=6">Latest Tips/Tricks</a></li>
		<li><a id="ctl00_TopNavBar_ArtTop" class="fly" href="http://www.codeproject.com/script/Articles/TopArticles.aspx?ta_so=5">Top Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtBeginner" class="fly" href="http://www.codeproject.com/search.aspx?aidlst=152&amp;sa_us=True">Beginner Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtBlogArticles" class="fly break" href="http://www.codeproject.com/script/Articles/BlogArticleList.aspx">Technical Blogs</a></li>
		<li><a id="ctl00_TopNavBar_ArtGuide" class="fly" href="http://www.codeproject.com/info/Submit.aspx">Posting/Update Guidelines</a></li>
		<li><a id="ctl00_TopNavBar_ArtHelpForum" class="fly" href="http://www.codeproject.com/Forums/1641/Article-Writing.aspx">Article Help Forum</a></li>
		<li><a id="ctl00_TopNavBar_ArtCompetition" class="fly break" href="http://www.codeproject.com/script/Awards/CurrentCompetitions.aspx?cmpTpId=1">Article Competition</a></li>
		<li><a id="ctl00_TopNavBar_ArtPostArticle" class="fly highlight1" href="http://www.codeproject.com/script/Articles/Submit.aspx">
			<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/write-gr.png" width="19px" height="13px"> Submit an article or tip
			</a></li>
		<li><a id="ctl00_TopNavBar_ArtPostBlog" class="fly highlight2" href="http://www.codeproject.com/script/Articles/BlogFeed.aspx">
			<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/write-or.png" width="19px" height="13px"> Post your Blog
			</a></li>		<li class="last"></li>
	</ul>

</li>



<li class=""><a id="ctl00_TopNavBar_Answers" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active">quick answers</a>
	<ul>
		<li id="ctl00_TopNavBar_AQL"><a id="ctl00_TopNavBar_ArticleQuestion" class="fly highlight1" href="#_comments">
			<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/write-gr.png" width="19px" height="13px"> Ask a Question about this 
			article</a>
		</li>

		<li><a id="ctl00_TopNavBar_QAAsk" class="fly highlight2" href="http://www.codeproject.com/Questions/ask.aspx"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/write-or.png" width="19px" height="13px"> Ask a Question</a></li>

		
		<li><a id="ctl00_TopNavBar_QAUnanswered" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=unanswered">View Unanswered Questions</a></li>
		<li><a id="ctl00_TopNavBar_QALatest" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active">View All Questions...</a></li>
		
				<li><a id="ctl00_TopNavBar_QATR_ctl00_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=81" style="padding-left:30px">C# questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl01_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=85" style="padding-left:30px">ASP.NET questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl02_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=842" style="padding-left:30px">VB.NET questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl03_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=308" style="padding-left:30px">C#4.0 questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl04_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=78" style="padding-left:30px">C++ questions</a></li>
			
		<li class="last"></li>
	</ul>

</li>



<li class=""><a id="ctl00_TopNavBar_Forums" href="http://www.codeproject.com/script/Forums/List.aspx">discussions</a>

	<ul>
		<li><a id="ctl00_TopNavBar_MessageBoardsAll" class="fly" href="http://www.codeproject.com/script/Forums/List.aspx">All Message Boards...</a></li>
		<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1580997/Application-Lifecycle.aspx">Application Lifecycle<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/1533717/Running-a-Business.aspx">Running a Business</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/1533716/Sales-Marketing.aspx">Sales / Marketing</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/1651/Collaboration-Beta-Testing.aspx">Collaboration / Beta Testing</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/3304/Work-Training-Issues.aspx">Work &amp; Training Issues</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/369270/Design-and-Architecture.aspx">Design and Architecture</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/12076/ASP-NET.aspx">ASP.NET</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1580226/JavaScript.aspx">JavaScript</a>
</li>
<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1647/C-Cplusplus-MFC.aspx">C / C++ / MFC<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/4486/ATL-WTL-STL.aspx">ATL /  WTL / STL</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/3785/Managed-Cplusplus-CLI.aspx">Managed C++/CLI</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1827459/Adobe-Technologies.aspx">Adobe Technologies</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1649/Csharp.aspx">C#</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1627782/Free-Tools.aspx">Free Tools</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1827460/Objective-C.aspx">Objective-C</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1832431/Ruby-On-Rails.aspx">Ruby On Rails</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1725/Database.aspx">Database</a>
</li>
<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/186301/Hardware-Devices.aspx">Hardware &amp; Devices<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/1644/System-Admin.aspx">System Admin</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1606152/Hosting-and-Servers.aspx">Hosting and Servers</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1643/Java.aspx">Java</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1650/NET-Framework.aspx">.NET Framework</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1848626/Android.aspx">Android</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/13695/Mobile.aspx">Mobile</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1653293/VS-2012-2013-NET-4-5-1.aspx">VS 2012/2013 &amp; .NET 4.5.1</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1540733/Sharepoint.aspx">Sharepoint</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1004257/Silverlight-WPF.aspx">Silverlight / WPF</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1646/Visual-Basic.aspx">Visual Basic</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1640/Web-Development.aspx">Web Development</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1645/Site-Bugs-Suggestions.aspx">Site Bugs / Suggestions</a>
</li>

		<li class="last"></li>
	</ul>

</li>




<li class=""><a id="ctl00_TopNavBar_Features" href="http://www.codeproject.com/Feature/">features</a>

	<ul>
        
		<li><a id="ctl00_TopNavBar_CPTV" class="fly highlight1" href="http://codeproject.tv/"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/CPTV-24.png" alt="CP.TV" style="vertical-align:text-bottom" width="24px" height="24px">CodeProject.TV</a></li>
        <li><a id="ctl00_TopNavBar_DiscussCPTV" class="fly break" href="http://www.codeproject.com/Forums/1829610/CodeProject-TV.aspx">Discuss CodeProject.TV</a>
		</li><li><a id="ctl00_TopNavBar_Catalog" class="fly" href="http://www.codeproject.com/script/Catalog/List.aspx">Component &amp; Service Catalog</a></li>
		<li><a id="ctl00_TopNavBar_Comps" class="fly" href="http://www.codeproject.com/script/Awards/CurrentCompetitions.aspx?cmpTpId=1&amp;awsac=true">Competitions</a></li>
		<li><a id="ctl00_TopNavBar_News" class="fly" href="http://www.codeproject.com/script/News/List.aspx">News</a></li>
		<li><a id="ctl00_TopNavBar_Insider" class="fly" href="http://www.codeproject.com/Feature/Insider/">The Insider Newsletter</a></li>
		<li><a id="ctl00_TopNavBar_Newsletters" class="fly" href="http://www.codeproject.com/script/Mailouts/Archive.aspx?mtpid=1">Newsletter archive</a></li>
		<li><a id="ctl00_TopNavBar_Surveys" class="fly" href="http://www.codeproject.com/script/Surveys/List.aspx">Surveys</a></li>
		<li><a id="ctl00_TopNavBar_Showcase" class="fly" href="http://www.codeproject.com/KB/showcase/">Product Showcase</a></li>
		<li><a id="ctl00_TopNavBar_Research" class="fly" href="http://www.codeproject.com/script/ResearchLibrary/Index.aspx">Research Library</a></li>

		
		<li><a id="ctl00_TopNavBar_Stuff" class="fly" href="http://www.codeproject.com/Info/Stuff.aspx">CodeProject Stuff</a></li>
		<li class="last"></li>
	</ul>

</li>


<li class=""><a id="ctl00_TopNavBar_Lounge" href="http://www.codeproject.com/Lounge.aspx">community</a>

	<ul>
		<li><a id="ctl00_TopNavBar_InsiderLnk" class="fly" href="http://www.codeproject.com/Insider.aspx">The Insider News</a></li>
		<li><a id="ctl00_TopNavBar_LoungeLnk" class="fly" href="http://www.codeproject.com/Lounge.aspx">The Lounge &nbsp;</a></li>
		<li><a id="ctl00_TopNavBar_WeirdWonderful" class="fly" href="http://www.codeproject.com/Feature/weirdandwonderful.aspx">The Weird &amp; The Wonderful</a></li>
		<li><a id="ctl00_TopNavBar_SoapBoxLnk" class="fly" href="http://www.codeproject.com/Forums/1536756/The-Soapbox.aspx">The Soapbox</a></li>
		<li><a id="ctl00_TopNavBar_PRLnk" class="fly break" href="http://www.codeproject.com/Forums/1738007/Press-Releases.aspx">Press Releases</a></li>
		<li><a id="ctl00_TopNavBar_WhosWho" class="fly" href="http://www.codeproject.com/script/Membership/Profiles.aspx">Who's Who</a></li>
		<li><a id="ctl00_TopNavBar_MVPs" class="fly" href="http://www.codeproject.com/script/Awards/MVPWinners.aspx">Most Valuable Professionals</a></li>
		<li><a id="ctl00_TopNavBar_Companies" class="fly break" href="http://www.codeproject.com/script/Membership/Profiles.aspx?mgtid=1&amp;mgm=True">Company Listings</a></li>

		
		<li class=""><a class="fly" href="http://www.codeproject.com/Forums/1580229/Hindi.aspx">Non-English Language
			<span class="has-submenu">&gt;</span></a>
		<ul>
		<li><a class="fly" href="http://www.codeproject.com/Forums/1580229/Hindi.aspx">General Indian Topics</a></li>
		<li><a class="fly" href="http://www.codeproject.com/Forums/1580230/Chinese.aspx">General Chinese Topics</a></li>
		</ul>
		</li><li class="last"></li>
		
	</ul>

</li>


<li class="" style="margin-left:20px"><a id="ctl00_TopNavBar_Help" href="http://www.codeproject.com/KB/FAQs/">help</a>

	<ul>
		<li><a id="ctl00_TopNavBar_HelpWhatIs" class="fly" href="http://www.codeproject.com/info/guide.aspx">What is 'CodeProject'?</a></li>
		<li><a id="ctl00_TopNavBar_HelpGeneral" class="fly break" href="http://www.codeproject.com/KB/FAQs/">General FAQ</a></li>
		<li><a id="ctl00_TopNavBar_HelpPostQuestion" class="fly break highlight1" href="http://www.codeproject.com/Questions/ask.aspx">Ask a Question</a></li>
		<li><a id="ctl00_TopNavBar_HelpBugs" class="fly" href="http://www.codeproject.com/Forums/1645/Site-Bugs-Suggestions.aspx">Bugs and Suggestions</a></li>
		<li><a id="ctl00_TopNavBar_HelpArticles" class="fly" href="http://www.codeproject.com/Forums/1641/Article-Writing.aspx">Article Help Forum</a></li>
		<li><a id="ctl00_TopNavBar_HelpSiteMap" class="fly" href="http://www.codeproject.com/script/Content/SiteMap.aspx">Site Map</a></li>
		<li><a id="ctl00_TopNavBar_HelpAdvertise" class="fly" href="http://developermedia.com/">Advertise with us</a></li>
		<li><a id="ctl00_TopNavBar_HelpJobs" class="fly" href="http://www.codeproject.com/info/Jobs/">Employment Opportunities</a></li>
		<li><a id="ctl00_TopNavBar_HelpAboutUs" class="fly" href="http://www.codeproject.com/info/about.aspx">About Us</a></li>
		<li class="last"></li>
	</ul>

</li>

</ul>

</div>
	</td><td align="right">
		

<div class="searchbar">

<form method="get" action="/search.aspx" name="Search" class="tight">


<table class="search" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><input tabindex="2" class="search  subdue" id="sb_tb" value="Search for articles, questions, tips" name="q"></td><td><input src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/search.gif" type="image"></td></tr></tbody></table>

<div class="hover-container">
	<div style="display: none;" id="SearchFilter" class="search-advanced small-text align-left">
	<b>Search within:<br></b>
		
		<input id="sb_kw" name="sbo" value="kw" checked="checked" type="radio"><label for="sb_kw">Articles</label><br>
<input id="sb_vkw" name="sbo" value="vkw" type="radio"><label for="sb_vkw">Videos</label><br>
<input id="sb_qa" name="sbo" value="qa" type="radio"><label for="sb_qa">Quick Answers</label><br>
<input id="sb_fm" name="sbo" value="fm" type="radio"><label for="sb_fm">Messages</label><br>
<input id="sb_ctlk" name="sbo" value="ctlk" type="radio"><label for="sb_ctlk">Product Catalog</label><br>


		
		
	</div>
</div>
</form>

</div>
	</td></tr></tbody></table>
	<div class="sub-headerbar-divider"></div>
	</div>
	

	<div id="A" class="container-content-wrap fixed"> 

	<div itemscope="" itemtype="http://schema.org/Article" class="container-content"> 

		<div class="clearfix">
			<div class="float-left container-breadcrumb">
				<div><a href="http://www.codeproject.com/script/Content/SiteMap.aspx">Articles</a> » <a href="http://www.codeproject.com/Chapters/8/Platforms-Frameworks-Libraries.aspx">Platforms, Frameworks &amp; Libraries</a> » <a href="http://www.codeproject.com/KB/WCF/"><span itemprop="articleSection">Windows Communication Foundation</span></a> » <a href="http://www.codeproject.com/KB/WCF/#General">General</a></div>
			</div>

			<div class="align-left float-right padded-top">
				


 
&nbsp;










			</div>

			<div class="float-right container-breadcrumb article-nav">
				
<div class="">


<a id="ctl00_PrevNext_NextLink" title="Next" href="http://www.codeproject.com/script/Articles/PrevNextLookup.aspx?aid=33825&amp;at=1&amp;secId=103" style="margin-left:5px">Next</a>
<img id="ctl00_PrevNext_NextImg" title="Next" rel="nofollow" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/arrow-right.png" style="border-width:0px;vertical-align:bottom;">
</div>
			</div>

			<div class="align-right float-left">
				
			</div>
		</div>

		<table class="extended container-article-parts" cellpadding="0" cellspacing="0"><tbody><tr valign="top">
		<td>

			<div id="ctl00_Nav" class="container-article-tabs">
				<div class="tabs">
					

<div class="">
	<div class="selected">Article</div><div class="unselected"><a href="http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=33825">Browse Code</a></div><div class="unselected"><a href="http://www.codeproject.com/script/Articles/Statistics.aspx?aid=33825">Stats</a></div><div class="unselected"><a href="http://www.codeproject.com/script/Articles/ListVersions.aspx?aid=33825">Revisions (2)</a></div><div class="unselected"><a href="http://www.codeproject.com/script/Articles/ListAlternatives.aspx?aid=33825">Alternatives</a></div>
</div>	


					<!-- anchorLink used to auto-link to comments at end of article -->
					<div class="unselected"><a href="http://www.codeproject.com/MasterPages/#_comments" id="ctl00_CommentLink" class="anchorLink">Comments &amp; 
						Discussions <span id="ctl00_CmtCnt">(32)</span></a>
					</div>
				</div>

				
			</div>

		</td>
		<td>
			
			<div id="AT" class="container-article  fixed"> 
				<div class="article">

					<form name="aspnetForm" method="post" action="/Articles/33825/WCF-TCP-based-File-Server" id="aspnetForm" style="margin:0;padding:0">
<div>
<input name="__VIEWSTATE" id="__VIEWSTATE" value="VUncToCo4SnVj8OaHiV186mg6Y6aWNTIlnoFZWeI2EkIhaEhn9zOCjplT1ki7WT9V+QO/L3joZ2+UvcgBjZyjY/ceMwUL9t8eqfl/ns0lq8c55Hnzu9wzqlKndPqKYeaVX6cO3LXF0HgG2/zYAop8ST2FrL9A654www1ZGyspDfCWfbD9Lbjf3Xu4cwUEeLzAy/jldFStAc/Rg6kzmGFps1z0BMkUWyuGxnfXFtI+WoGJ3raJNehw21gROZ81p9JWIjF4Pi3t3rJHHrlZ6te/rLFAi4O6Tyrc/1Vq2W7xnxSUrLvIjGLwzXJETK6G/5i+XJrVcTX4F4UkrsxNqkfUp3u67OAMdNHoSSoFc0qO8/uiy25fLHN9kbEt0G7zqQiOv5tZBv8bjHIwu4j5Sspz2s04b/LsYXY2pjJnZ4s9kJpL4t1iHBzMnPJ6Z/oXB2yBewrsANbkDGhLT+amx5UNgYbbRvKTqYjGpf/S1N6I0UMsZgE7vinhcg5XWlgWuOBqq2dNQYb+kZ1238k3WfhjrHljBPrNFjsMm6f7K8ph4VZpiODzq9mHuUHJ8E+a66paAsjuccGfOBJ6h7rsIrgA61acYA3Au8ZpUpFyPFccRefpJvRK9T9VM4LWuoj5d8mEV5qplg5j/KmG7ffd3NvtttsRREFN57a+zyi20+/T9XdhIy/f6h+wXRBmFE6IfubZfmdiSO+CcekvTT2aoXtr/70dUCQRjOWcfAJvGbVaU7+ZQKlVPi+UJDU4aPkLf66x+H6wrWMFfEonYFDRe4NTDsUZGVIEUk6X/N1ms+zfHZ+ph0l2NvdKZY3GiAo9ADO27gwP7p74eiewhdH77+3iOwsDxJ2j3fp4sYKzKEqoPgstvuHp4RrF4t+Df38lp0uatoNjwd/STkevUm3xtf2PX9mgW1iP+ht0mf1kqC2nfNJmF+v98vAt2+DwAjY5QlgT1A3oh34H/zAEol4m9E3zrL5kHrF3bTQ2drkBqd4r6lroz6jLQyk3AVAS9+PS2KwiEjRsfsstkUvJeGm2xLg87z6jPeRK5pjJsc+ygBNHqDTL24jhb8nywqj2i/urNU465Oiqi7mNMxx+MQb1qhPNjXo+38ZXD0gKZfvNdimPn6c+5LzwMRykUq0F92BVfV0wr2CJOK2z43TaAtP+S1WolXT7K/Lclx+Z4ombLX+LvcPFHaSZ0Bs+0gxuRppX9nan7vlEHoxOIMbRBcXvDZTlnDGPmVYMwEXbcn71bXb6DfkvPUMXHvoTWuPQCIxZU5xpHyB4ayhg2tkum6KI3oek+cUvsQRpnQ7ovUaw/bADvaIUolc0frTwpLzAaf7HKixLp6CEuX0+mQmTo2R7RiPvy/A5cDf0FwlzpqDw4tKZ4LMVWEhPfU7HFM+X2XSz5BMGvQKUoFISiE3a2o7aVuoiSQgQ9HfcqvRT5BcQW7955FQVLpq9IP476GBQx9aOZRJNfOWz/V+51UaZm5OKIgH67jLhFnpOrcUYSN9MzLWMrrMLmIkBubfL9qCkeK/Ftk50mQfyHARKLC241ZW7B8pmDhyX+R3dOEHfc95RcTiZUrArW790X0kmTjSvCMyZN1YszQ2TUWvRHPjlzOg5jv3DafpTBURIH3O39dUFbejwS1+O8nrAJbh4cNHoEvGWhLZH2P0ItEIOmd2qy7lqzfOF7oIkLs5yAuDM/94+v3X1h0Dh5fT7aZ/tliKDr2+Ooh36khAf9QYRDjWn33CFuqjpOootYAoqKngdY6OrU6C5YPhdRX0mmnirkh1Y+wqtRyJHLUQ/sURG2quFBQaDeTK33bGYS8vf92JiMKLC1Li2eH8INp34RQTc9eZk2mA0Eeleh4CX9jVQ+B8ngSTFg8gWp6rxvnJ35isagbuiQncQ21LKFgbb2iRDDAmcHxoXWwf1iRe1mjBrNE/whX1IgXB9smLb/QNfwb3gtlAqE25rU9UHASnhTkhWxuGlvJr8QRvL9h7GvoyBecn3DlpTfRL/5fdbyhS+JICwbn36+x3SDw6D4tfjktK3ObEsVroM/sXPyGmSPWBaRQxnH9jRdnyI/qNrKpNRIbyIf0MRm1oSl1WXJQRsmR5dKk/bsg+LlMJ5VOMecWDh9oolLbuVfkS0nOy5apcoHgEoWa5MAZvzSm/KhFV2Kzf1PQIeEOipxTFqOOfGHiJbjdDfLjlvV7Hbp/biaPduzFy9WcuM4Naba7hmvxa0Ac0ydex1+AEmLCSw4RpWL48Byc6MV7UPFYzNXmFbrRq5jvq+rJOGPHOAIF+YvkGu3Neu/97TtHTeFe7WpIo6fEzxCZqchjpZviRr0/3nZoUu/GqS5XXNQ2J0rmVrTFBCRJ05eqLp2F65NuLZ120VQ==" type="hidden">
</div>


					
					 
					<div class="header">

					<a name="Main"></a>

					
					<a name="_articleTop" id="_articleTop"></a>
					<div class="title">
					
					
					<h1 id="ctl00_ArticleTitle" itemprop="name">WCF TCP-based File Server</h1> 
					</div>

					
					<div class="entry">
						By <span class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=973068" rel="author"><span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name">StevenHobbs</span></span></a></span>, 
						<span class="date" itemprop="dateModified" content="2009-03-02 16:45:00">
							2 Mar 2009</span>
			
									
					</div>

					
					<table class="voting-bar"><tbody><tr><td nowrap="nowrap">
						<div id="ctl00_CurRat" class="tooltip anchorLink" style="cursor:pointer" name="CurRat_33825">
				
							

<table class="small-text" itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating" cellpadding="0" cellspacing="0"> 
<tbody><tr>
	
	<td class="nowrap">

		
			<meta itemprop="bestRating" content="5"> 
			<meta itemprop="worstRating" content="1">
		

		<span id="ctl00_ArticleRating_VI">
		<div class="nowrap rating-stars-large" style="height:19px;width:139px;position:relative;">
	<div class="clipped align-left float-left" style="height:19px;width:137px;">
		<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/stars-fill-lg.png" style="border-width:0px;">
	</div><div class="clipped" style="height:19px;width:2px;position:relative;">
		<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/stars-empty-lg.png" style="border-width:0px;position:absolute;top:0;right:0;">
	</div>
</div>
		</span>

		
	</td>
	
	<td id="ctl00_ArticleRating_VR" class="nowrap">
		&nbsp;
		<span id="ctl00_ArticleRating_VotesR">&nbsp;<span itemprop="ratingValue" class="rating">4.95</span> (<span itemprop="ratingCount" class="count">24</span> votes)</span>
		
	</td>

</tr>

</tbody></table>


							<div id="ctl00_RB" class="speech-bubble-container-up">
								<div class="speech-bubble-up" style="width:150px !important">
									            
<div>
<table class="feature" title="Voting Distribution. Recent data only" cellpadding="0" cellspacing="0" width="100%" height="50px"><tbody><tr class="chart-row"><td class="chart-column rating-ignore-vote" title="Outside deviation limits - not included in score."><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_002.gif" alt="" title="" border="0px" width="20pxpx" height="1px"><br><span title="0 votes">1</span></td>
<td class="chart-column rating-ignore-vote" title="Outside deviation limits - not included in score."><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_002.gif" alt="" title="" border="0px" width="20pxpx" height="1px"><br><span title="0 votes">2</span></td>
<td class="chart-column rating-ignore-vote" title="Outside deviation limits - not included in score."><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pollcol.gif" alt="1 vote, 4.2%" title="1 vote, 4.2%" border="0px" width="20pxpx" height="2px"><br><span title="1 vote">3</span></td>
<td class="chart-column"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pollcol.gif" alt="1 vote, 4.2%" title="1 vote, 4.2%" border="0px" width="20pxpx" height="2px"><br><span title="1 vote">4</span></td>
<td class="chart-column"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pollcol.gif" alt="22 votes, 91.7%" title="22 votes, 91.7%" border="0px" width="20pxpx" height="50px"><br><span title="22 votes">5</span></td>
</tr></tbody></table><div class="small-text align-center">4.95/5 - 24 votes</div><div class="small-text align-center subdue">1 removed</div><div class="small-text align-center subdue">μ 4.85, σ<sub>a</sub> 0.95 [<a href="http://www.codeproject.com/KB/FAQs/RatingReputationFAQ.aspx#noisefilter">?</a>]</div>
</div>
								</div>
								<div class="speech-bubble-pointer-up">
									<div class="speech-bubble-pointer-up-inner"></div>
								</div>
							</div>
						</div>
					</td>
					<td nowrap="nowrap">
						
					</td>
					<td id="ctl00_RateArticleRow" class="voting-bar">
							
							<div class="float-right align-right">
								<div id="ctl00_RateArticle_RateItemWrapper" class="small-text" name="RateItem_33825">

	<table class="small-text" cellpadding="0" cellspacing="0" width="100%">
	<tbody><tr>
		<td id="ctl00_RateArticle_VoteResultDiv" class="rating-result align-right">
			<span class="align-right"></span>
			<img class="loaderImg" alt="loading..." src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/animated_loading_blue.gif" style="display:none;" width="16px" height="16px"> 
		</td>

	
		<td class="voteTbl" style="white-space:nowrap" align="right">
			<table class="small-text">
			<tbody><tr>
				<td id="ctl00_RateArticle_SignIn" nowrap="nowrap">
					<a href="#SignUp">Sign Up</a> to vote
				</td>

				
				
				<td id="ctl00_RateArticle_VoteFormDiv" class="nowrap rating-stars-voter-large">
					

					<span id="ctl00_RateArticle_RB" class="tooltip ajaxHist radio voting">
						<span id="ctl00_RateArticle_VoteRBL"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_0" name="ctl00$RateArticle$VoteRBL" value="1" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_1" name="ctl00$RateArticle$VoteRBL" value="2" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_2" name="ctl00$RateArticle$VoteRBL" value="3" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_3" name="ctl00$RateArticle$VoteRBL" value="4" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_4" name="ctl00$RateArticle$VoteRBL" value="5" type="radio"></span> 

						
					<div class="rating-star-block"><a title="vote 1" class="star outline" rating="1" href="#">vote 1</a><a title="vote 2" class="star outline" rating="2" href="#">vote 2</a><a title="vote 3" class="star outline" rating="3" href="#">vote 3</a><a title="vote 4" class="star outline" rating="4" href="#">vote 4</a><a title="vote 5" class="star outline" rating="5" href="#">vote 5</a></div></span>

				</td>

				
				<td style="padding-left:5px">	
					<input style="display: none;" name="ctl00$RateArticle$SubmitRateBtn" value="Vote!" id="ctl00_RateArticle_SubmitRateBtn" class="button" type="submit">
				</td>
			</tr>
			</tbody></table>
			
		</td>
	</tr>
	</tbody></table>
	<div class="hover-container">
		<div id="ctl00_RateArticle_RCD" class="rating-comment align-left float-right">
			Add a reason or comment to your vote:
            <a href="#" id="clear-rate_ctl00_RateArticle_RCD" title="close" class="rating-close">x</a>
            <br>
			<textarea class="RateComment" rows="5" cols="60" style="width:98%;"></textarea>
			<span id="ctl00_RateArticle_CommentReq" class="subdue">Votes of 3 or less require a comment</span>
		</div>
	</div>
</div>
							</div>
							<div class="float-right">
								

<div class="social-bookmarks">
<span id="fb-wrap" class="facebook" style=""><div id="fb-root"></div><div class="fb-like" data-href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="segoe ui"></div></span>
<span class="google"><div class="g-plusone" data-size="medium"></div></span>
<span class="twitter"><iframe style="width: 109px; height: 20px;" data-twttr-rendered="true" title="Twitter Tweet Button" class="twitter-share-button twitter-tweet-button twitter-count-horizontal" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/tweet_button.htm" allowtransparency="true" id="twitter-widget-0" scrolling="no" frameborder="0"></iframe></span>
</div>
							</div> 
												
					</td>

					</tr></tbody></table>

					</div>
					
					

					
					

					
					
					

						
					

					

							
							<div id="contentdiv" class="text" itemprop="articleBody">
							



<ul class="download">
<li><a href="http://www.codeproject.com/KB/WCF/wcffileserver/FileServer.zip">Download source code - 21.1 KB</a></li>
</ul>

<p><img alt="FileServer" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/fileserver1.gif" width="469" height="290"></p>

<h2>Introduction</h2>

<p>This article shows you how to build a remote file store using WCF. Specifically:</p>

<ul>
<li>Using TCP binding to stream files to a client from a storage location</li>

<li>Connecting to the server from a WinForms client</li>

<li>Implementing the ability to download, upload, and delete files from remote storage</li>

<li>Configuring both server and client for streamed TCP transfer</li>
</ul>

<h2>Background</h2>

<p>There are a few reasons why you might want to create such a remote 
file store; one of them might be because you have several applications 
which need to share files which have been uploaded by a system user and 
then access from a separate administration system. This is the very 
reason which prompted me to investigate how this can be done using WCF, 
and my solution is presented in this article.</p>

<h2>Using the Code</h2>

<p>In this section, I shall detail the sections of code which are 
relevant to the topic, starting with an overview of the service itself. 
You don't necessarily have to do this, but to keep things clean and 
tidy, I have split my solution up into three projects:</p>

<ul>
<li>A class library project to house the service contract and the 
implementation, plus any utility classes which the service is dependant 
upon</li>

<li>A console application which hosts the service</li>

<li>A WinForms application to act as the client</li>
</ul>

<h2>The Service</h2>

<p>The operations which our service will provide are as follows:</p>

<ul>
<li>Downloading a file</li>

<li>Uploading a file</li>

<li>Deleting a file</li>

<li>Listing the contents of the file store</li>
</ul>

<p>For three of the operations (downloading, uploading, and deleting), 
the service requires only a virtual path to the file. Since the client 
should know nothing about the actual physical locations of the files in 
the file store, all we can pass to these operations is the path relative
 to the root of the store.</p>

<p>The last operation helps with this, since we can get a list of the 
available files complete with their virtual paths and make them 
available through some user interface.</p>

<p>Let's have a look at the contract which defines the operations our service provides:</p>

<div style="display:block" width="100%" id="premain0" class="pre-action-link"><img preid="0" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg0" width="9" height="9"><span preid="0" style="cursor: pointer; margin-bottom: 0px;" id="precollapse0"> Collapse</span><span> | </span><a preid="0" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre0" lang="cs">[ServiceContract] 
<span class="code-keyword">public</span> <span class="code-keyword">interface</span> IFileRepositoryService 
{ 
    [OperationContract] 
    Stream GetFile(<span class="code-keyword">string</span> virtualPath); 

    [OperationContract] 
    <span class="code-keyword">void</span> PutFile(FileUploadMessage msg); 

    [OperationContract] 
    <span class="code-keyword">void</span> DeleteFile(<span class="code-keyword">string</span> virtualPath); 

    [OperationContract] 
    StorageFileInfo[] List(<span class="code-keyword">string</span> virtualPath); 
}</pre>

<p>This is a pretty standard implementation of a service contract. Note that we are passing an actual <code>Stream</code> object from <code>GetFile()</code>
 which will contain the file data. Soon, we will configure our service 
for streaming which allows us to do this. When uploading a file (using <code>PutFile()</code>), we need to be able to send a <code>Stream</code>
 object and a virtual path to save the file to. However, in streaming 
mode, any messages which are to be streamed enforces a couple of 
restrictions on our methods (taken from <a href="http://msdn.microsoft.com/en-us/library/ms789010.aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ms789010.aspx</a>):</p>

<ol>
<li>The parameter which contains the streamed data must be the only parameter in the method.</li>

<li>At least one of the types of the parameter and the return value must be <code>Stream</code>, <code>Message</code>, or <code>IXmlSerializable</code>.</li>
</ol>

<p>The first point says that if the input message is to be streamed, 
there can only be one parameter in that method. If the output is to be 
streamed, then there can only be one output parameter or a return value.</p>

<p>So, if we need to pass some metadata along with our stream (such as a
 virtual path, in this case), then we can implement a message contract 
to send this data:</p>

<div style="display:block" width="100%" id="premain1" class="pre-action-link"><img preid="1" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg1" width="9" height="9"><span preid="1" style="cursor: pointer; margin-bottom: 0px;" id="precollapse1"> Collapse</span><span> | </span><a preid="1" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre1" lang="cs">[MessageContract]
<span class="code-keyword">public</span> <span class="code-keyword">class</span> FileUploadMessage
{
    [MessageHeader(MustUnderstand=true)]
    <span class="code-keyword">public</span> <span class="code-keyword">string</span> VirtualPath { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

    [MessageBodyMember(Order=1)]
    <span class="code-keyword">public</span> Stream DataStream { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
}</pre>

<p>Here, the <code>VirtualPath</code> property is sent to the service operation as the SOAP header, whilst the <code>Stream</code>
 property is sent as the input parameter to the operation. This allows 
us to send both bits of information that we require to store a file on 
the server. The <code>MustUnderstand</code> setting on the <code>MessageHeader</code>
 attribute simply indicates that the message receiver must understand 
and be able to process that member; otherwise, the channel is faulted.</p>

<h2>Service Implementation</h2>

<p>Let's finish up the service by implementing the service contract. In 
addition to the four methods which are required in order to fulfill the 
implementation of the service contract, I've added some events and 
properties which allow us to monitor what is happening to the 
repository, along with a custom <code>EventArgs</code> class and an appropriate delegate:</p>

<div style="display:block" width="100%" id="premain2" class="pre-action-link"><img preid="2" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg2" width="9" height="9"><span preid="2" style="cursor: pointer; margin-bottom: 0px;" id="precollapse2"> Collapse</span><span> | </span><a preid="2" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre2" lang="cs"><span class="code-keyword">public</span> <span class="code-keyword">delegate</span> <span class="code-keyword">void</span> FileEventHandler(<span class="code-keyword">object</span> sender, FileEventArgs e);

<span class="code-keyword">public</span> <span class="code-keyword">class</span> FileEventArgs : EventArgs
{
    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> Gets the virtual path.
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-keyword">public</span> <span class="code-keyword">string</span> VirtualPath
    {
        <span class="code-keyword">get</span> { <span class="code-keyword">return</span> _VirtualPath; }
    }
    <span class="code-keyword">string</span> _VirtualPath = <span class="code-keyword">null</span>;

    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> Initializes a new instance of the <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">see</span> <span class="code-SummaryComment">cref="FileEventArgs"</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">&gt;</span> class.
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">param</span> <span class="code-SummaryComment">name="vPath"</span><span class="code-SummaryComment">&gt;</span>The v path.<span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">param</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-keyword">public</span> FileEventArgs(<span class="code-keyword">string</span> vPath)
    {
        <span class="code-keyword">this</span>._VirtualPath = vPath;
    }
}</pre>

<p>We can then start to implement the service:</p>

<div style="display:block" width="100%" id="premain3" class="pre-action-link"><img preid="3" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg3" width="9" height="9"><span preid="3" style="cursor: pointer; margin-bottom: 0px;" id="precollapse3"> Collapse</span><span> | </span><a preid="3" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre3" lang="cs">[ServiceBehavior(IncludeExceptionDetailInFaults=true,
InstanceContextMode=InstanceContextMode.<span class="code-SDKkeyword">Single</span>)]
<span class="code-keyword">public</span> <span class="code-keyword">class</span> FileRepositoryService : IFileRepositoryService
{
    <span class="code-preprocessor">#region</span> Events

    <span class="code-keyword">public</span> <span class="code-keyword">event</span> FileEventHandler FileRequested;
    <span class="code-keyword">public</span> <span class="code-keyword">event</span> FileEventHandler FileUploaded;
    <span class="code-keyword">public</span> <span class="code-keyword">event</span> FileEventHandler FileDeleted;

    <span class="code-preprocessor">#endregion</span>
}</pre>

<p>Looking at the attributes here, I've specified that the server should
 include any exception details if the service were to fault. This way, 
we get more detailed exception messages at the client should the service
 fail. I've also declared that the <code>InstanceContextMode</code> should be <code>Single</code>.
 This means that the service instance should be used for multiple calls,
 and not be recycled after every call. While this does mean that the 
service can only handle one call at a time, it becomes a requirement if 
we want to handle events and monitor service status (as we shall see 
when we set up the service host). Depending on your requirements, you 
might want to abandon this facility to allow the service to handle 
multiple calls.</p>

<p>We've also set up our public events which can be handled in order to monitor access to the file server.</p>

<p>Let's implement those service methods now.</p>

<div style="display:block" width="100%" id="premain4" class="pre-action-link"><img preid="4" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg4" width="9" height="9"><span preid="4" style="cursor: pointer; margin-bottom: 0px;" id="precollapse4"> Collapse</span><span> | </span><a preid="4" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre4" lang="cs"><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Gets or sets the repository directory.
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">public</span> <span class="code-keyword">string</span> RepositoryDirectory { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }

<span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Gets a file from the repository
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">public</span> Stream GetFile(<span class="code-keyword">string</span> virtualPath)
{
    <span class="code-keyword">string</span> filePath = Path.Combine(RepositoryDirectory, virtualPath);

    <span class="code-keyword">if</span> (!File.Exists(filePath))
        <span class="code-keyword">throw</span> <span class="code-keyword">new</span> FileNotFoundException(<span class="code-string">"</span><span class="code-string">File was not found"</span>, 
                                        Path.GetFileName(filePath));

    SendFileRequested(virtualPath);

    <span class="code-keyword">return</span> <span class="code-keyword">new</span> FileStream(filePath, FileMode.Open, FileAccess.Read);
}

<span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Uploads a file into the repository
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">public</span> <span class="code-keyword">void</span> PutFile(FileUploadMessage msg)
{
    <span class="code-keyword">string</span> filePath = Path.Combine(RepositoryDirectory, msg.VirtualPath);
    <span class="code-keyword">string</span> dir = Path.GetDirectoryName(filePath);

    <span class="code-keyword">if</span> (!Directory.Exists(dir))
        Directory.CreateDirectory(dir);

    <span class="code-keyword">using</span> (<span class="code-keyword">var</span> outputStream = <span class="code-keyword">new</span> FileStream(filePath, FileMode.Create))
    {
        msg.DataStream.CopyTo(outputStream);
    }

    SendFileUploaded(filePath);
}

<span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Deletes a file from the repository
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">public</span> <span class="code-keyword">void</span> DeleteFile(<span class="code-keyword">string</span> virtualPath)
{
    <span class="code-keyword">string</span> filePath = Path.Combine(RepositoryDirectory, virtualPath);

    <span class="code-keyword">if</span> (File.Exists(filePath))
    {
        SendFileDeleted(virtualPath);
        File.Delete(filePath);
    }
}

<span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Lists files from the repository at the specified virtual path.
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">param</span> <span class="code-SummaryComment">name="virtualPath"</span><span class="code-SummaryComment">&gt;</span>The virtual path.
</span><span class="code-SummaryComment">///</span><span class="code-comment"> This can be null to list files from the root of
</span><span class="code-SummaryComment">///</span><span class="code-comment"> the repository.<span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">param</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">public</span> StorageFileInfo[] List(<span class="code-keyword">string</span> virtualPath)
{
    <span class="code-keyword">string</span> basePath = RepositoryDirectory;

    <span class="code-keyword">if</span> (!string.IsNullOrEmpty(virtualPath))
        basePath = Path.Combine(RepositoryDirectory, virtualPath);

    DirectoryInfo dirInfo = <span class="code-keyword">new</span> DirectoryInfo(basePath);
    FileInfo[] files = dirInfo.GetFiles(<span class="code-string">"</span><span class="code-string">*.*"</span>, SearchOption.AllDirectories);

    <span class="code-keyword">return</span> (from f <span class="code-keyword">in</span> files
           select <span class="code-keyword">new</span> StorageFileInfo()
           {
               Size = f.Length,
               VirtualPath = f.FullName.Substring(
                 f.FullName.IndexOf(RepositoryDirectory) + 
                 RepositoryDirectory.Length + <span class="code-digit">1</span>)
           }).ToArray();
}</pre>

<p>Most of these methods implement standard file operations. Remember 
that these methods only want to work with files relative to the root of 
the repository. This service class also has a public property on it 
called <code>RepositoryDirectory</code>, which indicates where the root 
path of the repository is. The intention is for the service host to 
configure this when the host is started. All operations which need to 
find files inside the repository should need this root path.</p>

<p>Since we don't want to reveal physical locations to the client, the <code>List()</code> method takes care to strip off all the sensitive path information, and only returns virtual paths relative to <code>RepositoryDirectory</code>.
 You could also return additional information about the file at this 
point; I've chosen to also return the size of the file in bytes.</p>

<p>There is one helper method for each public event on this service, and they are:</p>

<div style="display:block" width="100%" id="premain5" class="pre-action-link"><img preid="5" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg5" width="9" height="9"><span preid="5" style="cursor: pointer; margin-bottom: 0px;" id="precollapse5"> Collapse</span><span> | </span><a preid="5" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre5" lang="cs"><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Raises the FileRequested event.
</span><span class="code-SummaryComment">///</span><span class="code-comment">  <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">protected</span> <span class="code-keyword">void</span> SendFileRequested(<span class="code-keyword">string</span> vPath)
{
    <span class="code-keyword">if</span> (FileRequested != <span class="code-keyword">null</span>)
        FileRequested(<span class="code-keyword">this</span>, <span class="code-keyword">new</span> FileEventArgs(vPath));
}

<span class="code-SummaryComment">///</span><span class="code-comment">  <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Raises the FileUploaded event
</span><span class="code-SummaryComment">///</span><span class="code-comment">  <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">protected</span> <span class="code-keyword">void</span> SendFileUploaded(<span class="code-keyword">string</span> vPath)
{
    <span class="code-keyword">if</span> (FileUploaded != <span class="code-keyword">null</span>)
        FileUploaded(<span class="code-keyword">this</span>, <span class="code-keyword">new</span> FileEventArgs(vPath));
}

<span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-SummaryComment">///</span><span class="code-comment"> Raises the FileDeleted event.
</span><span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span><span class="code-keyword">protected</span> <span class="code-keyword">void</span> SendFileDeleted(<span class="code-keyword">string</span> vPath)
{
    <span class="code-keyword">if</span> (FileDeleted != <span class="code-keyword">null</span>)
        FileDeleted(<span class="code-keyword">this</span>, <span class="code-keyword">new</span> FileEventArgs(vPath));
}</pre>

<p>That wraps up the service itself; let's look at how to host this service.</p>

<h2>Hosting the Repository Service</h2>

<p>For this example, I have chosen to use <code>NetTcpBinding</code> for communication, but you could also use <code>BasicHttpBinding</code>,
 or any binding which supports the Streaming Transfer Mode. I'm going to
 run the server program as a Console application, configure the service 
entirely in the <em>app.config</em> file, and subscribe to those events that were created as part of the service implementation.</p>

<p>Let's create a console app, and set up a <code>ServiceHost</code> to host our repository service:</p>

<div style="display:block" width="100%" id="premain6" class="pre-action-link"><img preid="6" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg6" width="9" height="9"><span preid="6" style="cursor: pointer; margin-bottom: 0px;" id="precollapse6"> Collapse</span><span> | </span><a preid="6" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre6" lang="cs"><span class="code-keyword">static</span> <span class="code-keyword">void</span> Main(<span class="code-keyword">string</span>[] args)
{

    FileRepositoryService service = <span class="code-keyword">new</span> FileRepositoryService();
    service.RepositoryDirectory = <span class="code-string">"</span><span class="code-string">storage"</span>;

    service.FileRequested += <span class="code-keyword">new</span> FileEventHandler(Service_FileRequested);
    service.FileUploaded += <span class="code-keyword">new</span> FileEventHandler(Service_FileUploaded);
    service.FileDeleted += <span class="code-keyword">new</span> FileEventHandler(Service_FileDeleted);

    host = <span class="code-keyword">new</span> ServiceHost(service);

    <span class="code-keyword">try</span>
    {
        host.Open();
        Console.WriteLine(<span class="code-string">"</span><span class="code-string">Press a key to close the service"</span>);
        Console.ReadKey();
    }
    <span class="code-keyword">finally</span>
    {
        host.Close();
    }
}</pre>

<p>This will start the service running at the location specified in our 
service configuration (coming shortly). Note here that we pass in an 
actual instance of <code>FileRepositoryService</code>. The other option 
is to simply tell the host what type we want to work with, and let the 
host create the instance for itself. I've done it this way so that I can
 handle the various events which can be raised from my service 
implementation, but this is what limits you to using the <code>InstanceContextMode.Single</code>
 setting on your service implementation; this instance must stay alive 
across multiple service calls for it to be useful, and the only way to 
ensure this is to not recycle the service after every call.</p>

<p>I've also set the <code>RepositoryDirectory</code> property here, pointing the service towards the "<em>storage</em>"
 folder in whatever directory the host is running from. All the files 
within this storage directory are counted as being part of the 
repository.</p>

<p>The event handlers simply write out some feedback text to the console
 window to let us know what is going on with the repository:</p>

<div style="display:block" width="100%" id="premain7" class="pre-action-link"><img preid="7" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg7" width="9" height="9"><span preid="7" style="cursor: pointer; margin-bottom: 0px;" id="precollapse7"> Collapse</span><span> | </span><a preid="7" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre7" lang="cs"><span class="code-keyword">static</span> <span class="code-keyword">void</span> Service_FileRequested(<span class="code-keyword">object</span> sender, FileEventArgs e)
{
    Console.WriteLine(<span class="code-keyword">string</span>.Format(<span class="code-string">"</span><span class="code-string">File access\t{0}\t{1}"</span>, e.VirtualPath, DateTime.Now));
}

<span class="code-keyword">static</span> <span class="code-keyword">void</span> Service_FileUploaded(<span class="code-keyword">object</span> sender, FileEventArgs e)
{
    Console.WriteLine(<span class="code-keyword">string</span>.Format(<span class="code-string">"</span><span class="code-string">File upload\t{0}\t{1}"</span>, e.VirtualPath, DateTime.Now));
}

<span class="code-keyword">static</span> <span class="code-keyword">void</span> Service_FileDeleted(<span class="code-keyword">object</span> sender, FileEventArgs e)
{
    Console.WriteLine(<span class="code-keyword">string</span>.Format(<span class="code-string">"</span><span class="code-string">File deleted\t{0}\t{1}"</span>, e.VirtualPath, DateTime.Now));
}</pre>

<p>Configuring the service is just as short and sweet as setting up the hosting for it:</p>

<div style="display:block" width="100%" id="premain8" class="pre-action-link"><img preid="8" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg8" width="9" height="9"><span preid="8" style="cursor: pointer; margin-bottom: 0px;" id="precollapse8"> Collapse</span><span> | </span><a preid="8" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre8" lang="xml"><span class="code-keyword">&lt;</span><span class="code-leadattribute">configuration</span><span class="code-keyword">&gt;</span>
    <span class="code-keyword">&lt;</span><span class="code-leadattribute">system.serviceModel</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-leadattribute">services</span><span class="code-keyword">&gt;</span>
            <span class="code-keyword">&lt;</span><span class="code-leadattribute">service</span> <span class="code-attribute">name</span><span class="code-keyword">="</span><span class="code-keyword">FileServer.Services.FileRepositoryService"</span><span class="code-keyword">&gt;</span>
                <span class="code-keyword">&lt;</span><span class="code-leadattribute">endpoint</span> <span class="code-attribute">name</span><span class="code-keyword">="</span><span class="code-keyword">"</span> <span class="code-attribute">binding</span><span class="code-keyword">="</span><span class="code-keyword">netTcpBinding"</span>
                    <span class="code-attribute">address</span><span class="code-keyword">="</span><span class="code-keyword">net.tcp://localhost:5000"</span>
                    <span class="code-attribute">contract</span><span class="code-keyword">="</span><span class="code-keyword">FileServer.Services.IFileRepositoryService"</span>
                    <span class="code-attribute">bindingConfiguration</span><span class="code-keyword">="</span><span class="code-keyword">customTcpBinding"</span> <span class="code-keyword">/</span><span class="code-keyword">&gt;</span>
            <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">service</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">services</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-leadattribute">bindings</span><span class="code-keyword">&gt;</span>
            <span class="code-keyword">&lt;</span><span class="code-leadattribute">netTcpBinding</span><span class="code-keyword">&gt;</span>
                <span class="code-keyword">&lt;</span><span class="code-leadattribute">binding</span> <span class="code-attribute">name</span><span class="code-keyword">="</span><span class="code-keyword">customTcpBinding"</span> 
                  <span class="code-attribute">transferMode</span><span class="code-keyword">="</span><span class="code-keyword">Streamed"</span> 
                  <span class="code-attribute">maxReceivedMessageSize</span><span class="code-keyword">="</span><span class="code-keyword">20480000"</span> <span class="code-keyword">/</span><span class="code-keyword">&gt;</span>
            <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">netTcpBinding</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">bindings</span><span class="code-keyword">&gt;</span>
    <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">system.serviceModel</span><span class="code-keyword">&gt;</span>
<span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">configuration</span><span class="code-keyword">&gt;</span></pre>

<p>Here, we do several things:</p>

<ul>
<li>Specify that the binding to be used is <code>NetTcpBinding</code>.</li>

<li>Specify that the address which the service should be hosted on should be "net.tcp://localhost:5000".</li>

<li>Tell the service which service contract we want to expose.</li>

<li>Specify some custom binding settings. We need this in order to be 
able to set up the streaming transfer mode. I've bumped up the <code>maxReceivedMessageSize</code> from the default value of 65,536 bytes, since I'd like this service to be able to transfer files larger than 64K.</li>
</ul>

<p>The <code>name</code> attribute on the <code>service</code> element 
in the configuration is the same as the full type name of the service 
implementation; this is how the ServiceHost can pick up the correct 
configuration section when creating the host.</p>

<p>So, you should now be able to fire up your server program and leave it running, ready to accept connections.</p>

<h2>The Client</h2>

<p>The client that I built to connect to my server is a WinForms 
application. It's a simple GUI for displaying the file list from the 
server, and allows you to upload, download, and delete files. Here, I'll
 run through the major operations that this client performs rather than 
give you a code dump of the entire listing.</p>

<p>First, let's create a client proxy that we can use to access the 
service. For more information on the various methods of creating your 
proxy classes, please have a look at this <a href="http://www.codeproject.com/KB/WCF/CodeProxyGeneration.aspx">article on client proxy generation</a>.
 I'm going to use a hand-crafted proxy, which means that in my client, I
 have a reference to my Services project directly. If you created a 
proxy using Visual Studio, then you won't need this reference.</p>

<p>Here's my client proxy class:</p>

<div style="display:block" width="100%" id="premain9" class="pre-action-link"><img preid="9" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg9" width="9" height="9"><span preid="9" style="cursor: pointer; margin-bottom: 0px;" id="precollapse9"> Collapse</span><span> | </span><a preid="9" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre9" lang="cs"><span class="code-keyword">public</span> <span class="code-keyword">class</span> FileRepositoryServiceClient : 
    ClientBase&lt;IFileRepositoryService&gt;, 
    IFileRepositoryService, IDisposable
{
    <span class="code-keyword">public</span> FileRepositoryServiceClient()
        : <span class="code-keyword">base</span>(<span class="code-string">"</span><span class="code-string">FileRepositoryService"</span>)
    {
    }

    <span class="code-preprocessor">#region</span> IFileRepositoryService Members

    <span class="code-keyword">public</span> System.IO.Stream GetFile(<span class="code-keyword">string</span> virtualPath)
    {
        <span class="code-keyword">return</span> <span class="code-keyword">base</span>.Channel.GetFile(virtualPath);
    }

    <span class="code-keyword">public</span> <span class="code-keyword">void</span> PutFile(FileUploadMessage msg)
    {
        <span class="code-keyword">base</span>.Channel.PutFile(msg);
    }

    <span class="code-keyword">public</span> <span class="code-keyword">void</span> DeleteFile(<span class="code-keyword">string</span> virtualPath)
    {
        <span class="code-keyword">base</span>.Channel.DeleteFile(virtualPath);
    }

    <span class="code-keyword">public</span> StorageFileInfo[] List()
    {
        <span class="code-keyword">return</span> List(<span class="code-keyword">null</span>);
    }

    <span class="code-keyword">public</span> StorageFileInfo[] List(<span class="code-keyword">string</span> virtualPath)
    {
        <span class="code-keyword">return</span> <span class="code-keyword">base</span>.Channel.List(virtualPath);
    }

    <span class="code-preprocessor">#endregion</span>

    <span class="code-preprocessor">#region</span> IDisposable Members

    <span class="code-keyword">void</span> IDisposable.Dispose()
    {
        <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.State == CommunicationState.Opened)
            <span class="code-keyword">this</span>.Close();
    }

    <span class="code-preprocessor">#endregion</span>
}</pre>

<p>All of the methods here simply reflect the methods which are available on the server, with the exception of the overload on <code>List()</code> (since for this particular client, I want to always list files from the root of the repository and not have to pass in <code lang="cs">null</code>
 all the time). Note also the lack of error handling; in a production 
environment, you will almost certainly want to implement the appropriate
 error handling routines here.</p>

<p>In the constructor for my client, I've given it the name of the 
configuration element that it should use when setting up the 
communication channel. This configuration section looks like the 
following:</p>

<div style="display:block" width="100%" id="premain10" class="pre-action-link"><img preid="10" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg10" width="9" height="9"><span preid="10" style="cursor: pointer; margin-bottom: 0px;" id="precollapse10"> Collapse</span><span> | </span><a preid="10" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre10" lang="xml"><span class="code-keyword">&lt;</span><span class="code-leadattribute">system.serviceModel</span><span class="code-keyword">&gt;</span>
    <span class="code-keyword">&lt;</span><span class="code-leadattribute">client</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-leadattribute">endpoint</span> <span class="code-attribute">name</span><span class="code-keyword">="</span><span class="code-keyword">FileRepositoryService"</span>
            <span class="code-attribute">address</span><span class="code-keyword">="</span><span class="code-keyword">net.tcp://localhost:5000"</span>
            <span class="code-attribute">binding</span><span class="code-keyword">="</span><span class="code-keyword">netTcpBinding"</span>
            <span class="code-attribute">contract</span><span class="code-keyword">="</span><span class="code-keyword">FileServer.Services.IFileRepositoryService"</span>
            <span class="code-attribute">bindingConfiguration</span><span class="code-keyword">="</span><span class="code-keyword">customTcpBinding"</span> <span class="code-keyword">/</span><span class="code-keyword">&gt;</span>
    <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">client</span><span class="code-keyword">&gt;</span>

    <span class="code-keyword">&lt;</span><span class="code-leadattribute">bindings</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-leadattribute">netTcpBinding</span><span class="code-keyword">&gt;</span>
            <span class="code-keyword">&lt;</span><span class="code-leadattribute">binding</span> <span class="code-attribute">name</span><span class="code-keyword">="</span><span class="code-keyword">customTcpBinding"</span> 
                <span class="code-attribute">maxReceivedMessageSize</span><span class="code-keyword">="</span><span class="code-keyword">20480000"</span> 
                <span class="code-attribute">transferMode</span><span class="code-keyword">="</span><span class="code-keyword">Streamed"</span> <span class="code-keyword">/</span><span class="code-keyword">&gt;</span>
        <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">netTcpBinding</span><span class="code-keyword">&gt;</span>
    <span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">bindings</span><span class="code-keyword">&gt;</span>
<span class="code-keyword">&lt;</span><span class="code-keyword">/</span><span class="code-leadattribute">system.serviceModel</span><span class="code-keyword">&gt;</span></pre>

<p>It is pretty similar to the host configuration. Note the endpoint 
name that we've given; this is what the client's constructor parameter 
is set to in the client class we created above. Also note that it uses 
the same binding (<code>netTcpBinding</code>) and points to the same address that the host is using. In the binding configuration, I've also set the transfer mode to '<code>Streamed</code>' and have set the <code>maxReceivedMessageSize</code> attribute to the same value as the host.</p>

<p>The message size attribute setting isn't a necessity however; it's 
set to the same value on both, since I'm going to be streaming larger 
files to and from the server. If I was only downloading files from the 
server, then I would only need to set this on the client side. 
Similarly, if I was only going to be sending large files to the server, I
 would only need to set that on the host's side. Note also that these 
settings only need to be set manually if you wish to transfer more than 
64K of data in a single transfer.</p>

<p>OK, lets go ahead and actually use the client.</p>

<p>There are four places where we can make use of the remote storage service:</p>

<ul>
<li>Uploading a file to the repository using the 'Upload' button.</li>

<li>Downloading a file from the repository using the 'Download' button.</li>

<li>Deleting a file from the repository using the 'Delete' button.</li>

<li>Listing the files when the form loads, and also when the repository changes (such as uploading and deleting a file).</li>
</ul>

<p>I'll go through each of these buttons and also list the method which 
fetches the file list from the repository. Each function simply makes a 
call to the service using the client which we crafted above, and as a 
result, makes implementing the client application very easy.</p>

<p>To list the files, we use the <code>List()</code> method:</p>

<div style="display:block" width="100%" id="premain11" class="pre-action-link"><img preid="11" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg11" width="9" height="9"><span preid="11" style="cursor: pointer; margin-bottom: 0px;" id="precollapse11"> Collapse</span><span> | </span><a preid="11" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre11" lang="cs"><span class="code-keyword">private</span> <span class="code-keyword">void</span> RefreshFileList()
{
    StorageFileInfo[] files = <span class="code-keyword">null</span>;

    <span class="code-keyword">using</span> (FileRepositoryServiceClient client = <span class="code-keyword">new</span> FileRepositoryServiceClient())
    {
        files = client.List(<span class="code-keyword">null</span>);
    }

    FileList.Items.Clear();

    <span class="code-keyword">int</span> width = FileList.ClientSize.Width - SystemInformation.VerticalScrollBarWidth;

    <span class="code-keyword">float</span>[] widths = { .2f, .6f, .2f };

    <span class="code-keyword">for</span> (<span class="code-keyword">int</span> i = <span class="code-digit">0</span>; i &lt; widths.Length; i++)
        FileList.Columns[i].Width = (<span class="code-keyword">int</span>)((<span class="code-keyword">float</span>)width * widths[i]);

    <span class="code-keyword">foreach</span> (<span class="code-keyword">var</span> file <span class="code-keyword">in</span> files)
    {
        ListViewItem item = <span class="code-keyword">new</span> ListViewItem(Path.GetFileName(file.VirtualPath));

        item.SubItems.Add(file.VirtualPath);

        <span class="code-keyword">float</span> fileSize = (<span class="code-keyword">float</span>)file.Size / <span class="code-digit">1024</span>.0f;
        <span class="code-keyword">string</span> suffix = <span class="code-string">"</span><span class="code-string">Kb"</span>;

        <span class="code-keyword">if</span> (fileSize &gt; <span class="code-digit">1000</span>.0f)
        {
            fileSize /= <span class="code-digit">1024</span>.0f;
            suffix = <span class="code-string">"</span><span class="code-string">Mb"</span>;
        }
        item.SubItems.Add(<span class="code-keyword">string</span>.Format(<span class="code-string">"</span><span class="code-string">{0:0.0} {1}"</span>, fileSize, suffix));

        FileList.Items.Add(item);
    }
}</pre>

<p>As you can see, most of this code deals with sorting out the UI, including setting column widths on the <code>ListView</code> control and creating the actual list items. The actual call to get the files from the remote store is done in only a few lines.</p>

<p>The upload, download, and delete file operations are executed in the same simple manner:</p>

<div style="display:block" width="100%" id="premain12" class="pre-action-link"><img preid="12" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg12" width="9" height="9"><span preid="12" style="cursor: pointer; margin-bottom: 0px;" id="precollapse12"> Collapse</span><span> | </span><a preid="12" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre12" lang="cs"><span class="code-keyword">private</span> <span class="code-keyword">void</span> UploadButton_Click(<span class="code-keyword">object</span> sender, EventArgs e)
{
    OpenFileDialog dlg = <span class="code-keyword">new</span> OpenFileDialog()
    {
        Title = <span class="code-string">"</span><span class="code-string">Select a file to upload"</span>,
        RestoreDirectory = <span class="code-keyword">true</span>,
        CheckFileExists = <span class="code-keyword">true</span>
    };

    dlg.ShowDialog();

    <span class="code-keyword">if</span> (!string.IsNullOrEmpty(dlg.FileName))
    {
        <span class="code-keyword">string</span> virtualPath = Path.GetFileName(dlg.FileName);

        <span class="code-keyword">using</span> (Stream uploadStream = <span class="code-keyword">new</span> FileStream(dlg.FileName, FileMode.Open))
        {
            <span class="code-keyword">using</span> (FileRepositoryServiceClient client = <span class="code-keyword">new</span> FileRepositoryServiceClient())
            {
                client.PutFile(<span class="code-keyword">new</span> FileUploadMessage() { VirtualPath = virtualPath, 
                                                         DataStream = uploadStream });
            }
        }

        RefreshFileList();
    }
}

<span class="code-keyword">private</span> <span class="code-keyword">void</span> DownloadButton_Click(<span class="code-keyword">object</span> sender, EventArgs e)
{

    <span class="code-keyword">if</span> (FileList.SelectedItems.Count == <span class="code-digit">0</span>)
    {
        MessageBox.Show(<span class="code-string">"</span><span class="code-string">You must select a file to download"</span>);
    }
    <span class="code-keyword">else</span>
    {
        ListViewItem item = FileList.SelectedItems[<span class="code-digit">0</span>];

        <span class="code-comment">//</span><span class="code-comment"> Strip off 'Root' from the full path
</span>        <span class="code-keyword">string</span> path = item.SubItems[<span class="code-digit">1</span>].Text;

        <span class="code-comment">//</span><span class="code-comment"> Ask where it should be saved
</span>        SaveFileDialog dlg = <span class="code-keyword">new</span> SaveFileDialog()
        {
            RestoreDirectory = <span class="code-keyword">true</span>,
            OverwritePrompt = <span class="code-keyword">true</span>,
            Title = <span class="code-string">"</span><span class="code-string">Save as..."</span>,
            FileName = Path.GetFileName(path)
        };

        dlg.ShowDialog(<span class="code-keyword">this</span>);

        <span class="code-keyword">if</span> (!string.IsNullOrEmpty(dlg.FileName))
        {
            <span class="code-comment">//</span><span class="code-comment"> Get the file from the server
</span>            <span class="code-keyword">using</span> (FileStream output = 
                   <span class="code-keyword">new</span> FileStream(dlg.FileName, FileMode.Create))
            {
                Stream downloadStream;

                <span class="code-keyword">using</span> (FileRepositoryServiceClient client = 
                       <span class="code-keyword">new</span> FileRepositoryServiceClient())
                {
                    downloadStream = client.GetFile(path);
                }

                downloadStream.CopyTo(output);
            }

            Process.Start(dlg.FileName);
        }
    }
}</pre>

<p>The upload and download functions get special mention because they work with <code>Stream</code>
 objects, but as you can see, you don't do anything different with them 
than what you'd normally do when working with streams. You just have to 
create some sort of stream and pass it to the service; we have already 
configured our service for streamed mode, so the transfer of the data is
 handled appropriately for us.</p>

<p>One thing I do use here is an extension method on <code>Stream</code> which simply copies data between any two streams. The extension method is called '<code>CopyTo</code>', and looks like the following:</p>

<div style="display:block" width="100%" id="premain13" class="pre-action-link"><img preid="13" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg13" width="9" height="9"><span preid="13" style="cursor: pointer; margin-bottom: 0px;" id="precollapse13"> Collapse</span><span> | </span><a preid="13" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre13" lang="cs"><span class="code-keyword">public</span> <span class="code-keyword">static</span> <span class="code-keyword">class</span> StreamExtensions
{
    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> Copies data from one stream to another.
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">summary</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">param</span> <span class="code-SummaryComment">name="input"</span><span class="code-SummaryComment">&gt;</span>The input stream<span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">param</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-SummaryComment">///</span><span class="code-comment"> <span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">param</span> <span class="code-SummaryComment">name="output"</span><span class="code-SummaryComment">&gt;</span>The output stream<span class="code-SummaryComment">&lt;</span><span class="code-SummaryComment">/</span><span class="code-SummaryComment">param</span><span class="code-SummaryComment">&gt;</span>
</span>    <span class="code-keyword">public</span> <span class="code-keyword">static</span> <span class="code-keyword">void</span> CopyTo(<span class="code-keyword">this</span> Stream input, Stream output)
    {
        <span class="code-keyword">const</span> <span class="code-keyword">int</span> bufferSize = <span class="code-digit">2048</span>;
        <span class="code-keyword">byte</span>[] buffer = <span class="code-keyword">new</span> <span class="code-keyword">byte</span>[bufferSize];
        <span class="code-keyword">int</span> bytes = <span class="code-digit">0</span>;

        <span class="code-keyword">while</span> ((bytes = input.Read(buffer, <span class="code-digit">0</span>, bufferSize)) &gt; <span class="code-digit">0</span>)
        {
            output.Write(buffer, <span class="code-digit">0</span>, bytes);
        }
    }
}</pre>

<p>I've kept this extension method in my service library, since both my client and the service itself use it.</p>

<p>Finally, the delete method:</p>

<div style="display:block" width="100%" id="premain14" class="pre-action-link"><img preid="14" style="cursor: pointer;" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/minus.gif" id="preimg14" width="9" height="9"><span preid="14" style="cursor: pointer; margin-bottom: 0px;" id="precollapse14"> Collapse</span><span> | </span><a preid="14" href="#">Copy Code</a></div><pre style="margin-top: 0px;" id="pre14" lang="cs"><span class="code-keyword">private</span> <span class="code-keyword">void</span> DeleteButton_Click(<span class="code-keyword">object</span> sender, EventArgs e)
{

    <span class="code-keyword">if</span> (FileList.SelectedItems.Count == <span class="code-digit">0</span>)
    {
        MessageBox.Show(<span class="code-string">"</span><span class="code-string">You must select a file to delete"</span>);
    }
    <span class="code-keyword">else</span>
    {
        <span class="code-keyword">string</span> virtualPath = FileList.SelectedItems[<span class="code-digit">0</span>].SubItems[<span class="code-digit">1</span>].Text;

        <span class="code-keyword">using</span> (FileRepositoryServiceClient client = <span class="code-keyword">new</span> FileRepositoryServiceClient())
        {
            client.DeleteFile(virtualPath);
        }

        RefreshFileList();
    }

}</pre>

<p>When you delete a file, the service simply requires the virtual path 
to the file you wish to delete; I store this virtual path in a <code>SubItem</code> of the <code>ListItem</code> object when populating the <code>ListView</code> control, so all I do here is read that value out and send it back to the file service.</p>

<p>When you download, upload, and delete files, you should also be able 
to see the log messages coming through from our host in the console 
window. This way, if you have remote clients (and not a client on the 
same computer like we have here in our local environment), you can keep a
 tab on their actions directly.</p>

<h2>Taking it Further</h2>

<p>Obviously, this is a pretty basic implementation designed to show you
 how you could go about implementing something like this using WCF. To 
use in a production environment, you'll more than likely want to take 
into account security requirements. How can you restrict access to files
 in a multi-user environment? If you were to host the service on a 
public endpoint, how can you secure that so that only authorized clients
 can connect? What about more technical considerations such as 
restricting file size and enforcing transfer limits, possibly 
configurable per user?</p>

<p>Some of these requirements can be implemented by making the 
appropriate changes to the service; for example, supplying the service 
with a username and password which the service would authenticate 
against a database, or by using Windows security to control access to 
the files.</p>

<p>These sorts of considerations I have yet to touch on myself, but at 
least the code presented here will stand you in good stead to begin to 
tackle these issues.</p>

<p>And, that's all there is to it. All of the code here is available to 
view and mess around with in the archive attached to this article. If 
you have any questions, I'd be happy to answer them!</p>

<p>Thanks for reading.</p>

<h2>History</h2>

<ul>
<li>02/03/2009: First version.</li>
</ul>


							</div>
							

							
							
							<h2>License</h2>
							<div id="LicenseTerms"><p>This article, along with any associated source code and files, is licensed under <a href="http://www.codeproject.com/info/cpol10.aspx" rel="license">The Code Project Open License (CPOL)</a></p></div>
							

							<div class="float-right" style="margin:20px 0 0 0;border:1px solid #ccc">
							<div class="msg-300x250" data-format="300x250" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="ros" data-loadonview="true" data-tags=".NET3.0, .NET3.5, C#, Windows, Architect, Dev, WCF, Beginner, Intermediate,rating4.5"></div>
							</div>

							
							<h2 id="ctl00_AboutHeading">About the Author</h2>
							

<div class="container">
<div style="width:210px;overflow:hidden;float:left;text-align:center">
	<img id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberPhoto" class="profile-pic" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/member_unknown.gif" style="border-width:0px;transform:rotate(-4deg);">
</div>
<div class="container-member float-left" style="width:235px">
	<b><a id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberProfileLink" class="author" href="http://www.codeproject.com/Members/StevenHobbs">StevenHobbs</a></b>
	<div class="company">
		<span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberJobTitle">Software Developer</span>
		<span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberCompany">Orchid Software</span> 
		<br><span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberLocation">United Kingdom <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/UK.gif" alt="United Kingdom" width="16px" height="11px"></span>
	</div>
</div>
	
<div class="padded-top float-left clearfix" style="width:600px">
	No Biography provided

	

	<div id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_FollowOn" class="padded-top">Follow on
		&nbsp; <a href="http://www.twitter.com/elkdanger"><img style="vertical-align:middle;border:0;" alt="Twitter" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_logo-a.png"></a> <a href="http://www.twitter.com/elkdanger?rel=author" rel="author" class="small-text">Twitter</a>
		
		
	</div>
</div>
</div><br>
							
							

							<div class="clearfix"></div>

							<div style="padding-top:8px">
								<a class="anchorLink" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server#_articleTop">Article Top</a>
							</div>


						
						<div style="margin:auto;height:90px;margin-top:10px"> 
							<div class="msg-728x90" data-format="728x90" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="bottom" data-loadonview="true" data-tags=".NET3.0, .NET3.5, C#, Windows, Architect, Dev, WCF, Beginner, Intermediate,pos_bottom"></div>
						</div>
						
					

					</form>

				</div>

				
					
					<h2>Comments and Discussions</h2>
					<a class="float-left" name="_comments" id="_comments">&nbsp;</a><div id="_MessageBoardctl00_MessageBoard" onclick="return SwitchMessage(event, null)">
	<table id="ForumTable" class="forum relaxed" cellpadding="0" cellspacing="0">
		<tbody><tr>
			<td class="header1 callout"><b>You must <a href="https://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server%3ffid%3d1536772%26df%3d90%26mpp%3d10%26noise%3d1%26prof%3dTrue%26sort%3dPosition%26view%3dNormal%26spc%3dRelaxed">Sign In</a> to use this message board.</b></td>
		</tr><tr>
			<td><table border="0" cellpadding="3px" cellspacing="0" width="100%">
				<tbody><tr class="header1">
					<td colspan="2" style="white-space:nowrap;"><div class="container">
						<div class="float-right">
							<form action="/Search.aspx?fid=0" method="get" class="searchbar">
								<input name="fid" value="1536772" type="hidden"><b>Search this forum </b><input class="search" name="qf" type="search">&nbsp;<input value="Go" class="button" type="submit">
							</form>
						</div>
					</div></td></tr><tr class="header2">
						<td></td><td style="width:100%;"><div style="text-align:right;">
							<form action="/script/Forums/SetOptions.aspx?floc=%2fArticles%2f33825%2fWCF-TCP-based-File-Server&amp;fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed" method="get" style="margin:0;padding:0;">
								<input name="fid" value="1536772" type="hidden"><input name="currentQS" value="?floc=%2fArticles%2f33825%2fWCF-TCP-based-File-Server&amp;fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed" type="hidden"><input name="floc" value="/Articles/33825/WCF-TCP-based-File-Server" type="hidden"><input checked="checked" name="prof" id="prof" style="vertical-align:middle;" type="checkbox"><label for="prof">Profile popups</label>&nbsp;&nbsp;&nbsp;&nbsp;Spacing<select size="1" class="dropdown" name="spc">
									<option selected="selected" value="Relaxed">Relaxed</option><option value="Compact">Compact</option><option value="Tight">Tight</option>
								</select>&nbsp;&nbsp;Noise<select size="1" class="dropdown" name="noise">
									<option selected="selected" value="1">Very High</option><option value="2">High</option><option value="3">Medium</option><option value="4">Low</option><option value="5">Very Low</option>
								</select>&nbsp;&nbsp;Layout<select size="1" class="dropdown" name="view">
									<option selected="selected" value="Normal">Normal</option><option value="Topic">Open Topics</option><option value="Expanded">Open All</option><option value="Thread">Thread View</option>
								</select>&nbsp;&nbsp;Per page<select size="1" class="dropdown" name="mpp">
									<option selected="selected" value="10">10</option><option value="25">25</option><option value="50">50</option>
								</select>&nbsp;&nbsp;&nbsp;<input value="Update" name="SetOpt" class="button" type="submit">
							</form>
						</div></td>
					</tr>
				
			</tbody></table></td></tr><tr>
				<td><a name="xx0xx"></a><table border="0" cellpadding="2px" cellspacing="0" width="100%">
					<tbody><tr class="navbar">
						<td></td><td style="text-align:right;width:50%;"></td><td style="text-align:right;white-space:nowrap;"><span class="nav-link disabled">First</span> <span class="nav-link disabled">Prev</span><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=11#xx0xx">Next</a></td>
					</tr>
				</tbody></table></td>
			</tr><tr>
				<td><table class="fixed-layout blank-background" border="0" cellpadding="0" cellspacing="0" width="100%">
					<tbody><tr>
						<td><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" border="0" width="1px" height="5px"></td>
					</tr><tr id="F4708572_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4708572xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4708572" parent="0" thread="4708572" href="http://www.codeproject.com/Messages/4708572/How-can-I-host-the-server-service-in-IIS.aspx">How can I host the server service in IIS.</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=6302898">jayantbramhankar</a></td><td class="date">24-Nov-13  20:40&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4708572_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="6302898" msgid="4708572" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">How can I host tcp server service in IIS.<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4708572" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4708572/How-can-I-host-the-server-service-in-IIS.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4708572" data-ref="3_4708572" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4674770_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4674770xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4674770" parent="0" thread="4674770" href="http://www.codeproject.com/Messages/4674770/Installing-Service-on-Remote-Server.aspx">Installing Service on Remote Server</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=4017671">polczym</a></td><td class="date">7-Oct-13  5:25&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4674770_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="4017671" msgid="4674770" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">I found this article very helpful.  <br>
Thank you very much.  <br>
I'm new to WCF, and have a lot of .Net experience.  <br>
I basically understand what you are doing with this excellent example.<br>
My question is: How would I write and install the FileServer service so 
that I can install it on my remote Windows2008 server? If I install the 
current code via ClickOnce, I don't have control on the installation 
location, and I am confused how to point the remote Client application 
back to the Server service.<br>
Thank you for your patience.<br>
Please advise.<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/smiley_squeamish.gif" alt="Unsure | :~" align="top"> <br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4674770" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4674770/Installing-Service-on-Remote-Server.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4674770" data-ref="3_4674770" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4675677_h0" class="header hover-row">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="38px"><a name="xx4675677xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4675677" parent="4674770" thread="4674770" href="http://www.codeproject.com/Messages/4675677/Re-Installing-Service-on-Remote-Server.aspx">Re: Installing Service on Remote Server [modified]</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=4017671">polczym</a></td><td class="date">8-Oct-13  4:39&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4675677_h1" class="content selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:38px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="38px" height="1px"><div class="voteform vertical" ownerid="4017671" msgid="4675677" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">Upon doing more research, I found that it is
 simple to Publish the service on a remote server using Visual Studio.  
Now the next challenge is changing the program type from an executable 
that runs from a Console Window to a true service, where I can specify 
specific folders, versus a folder relative to the installation location 
of the application/service. <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/smiley_smile.gif" alt="Smile | :)" align="top"> <br><br><div class="modified">modified  8-Oct-13 11:48am.</div><br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4674770" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4675677/Re-Installing-Service-on-Remote-Server.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4675677" data-ref="3_4675677" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4524824_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4524824xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4524824" parent="0" thread="4524824" href="http://www.codeproject.com/Messages/4524824/Is-this-application-a-P2P-system.aspx">Is this application a P2P system?</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=5589178">Amir Jalilifard</a></td><td class="date">22-Mar-13  23:42&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4524824_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="5589178" msgid="4524824" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">Hi,<br>
I am confused to understand that is this application a Peer to Peer application?<br>
If it is not,What should we do for being a P2P application?<br>
Is TCP a different concept than P2P?<br>
So what is different between net.tcp:// and net.p2p:// in addressing ?<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4524824" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4524824/Is-this-application-a-P2P-system.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4524824" data-ref="3_4524824" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4524898_h0" class="header hover-row">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="38px"><a name="xx4524898xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4524898" parent="4524824" thread="4524824" href="http://www.codeproject.com/Messages/4524898/Re-Is-this-application-a-P2P-system.aspx">Re: Is this application a P2P system?</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=529314">du[DE]</a></td><td class="date">23-Mar-13  4:15&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4524898_h1" class="content selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:38px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="38px" height="1px"><div class="voteform vertical" ownerid="529314" msgid="4524898" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">No, it is not. If you are looking for one such project, take a look: <a href="http://www.codeproject.com/Articles/17321/A-simple-peer-to-peer-chat-application-using-WCF-n">A simple peer to peer chat application using WCF netPeerTcpBinding</a>[<a href="http://www.codeproject.com/Articles/17321/A-simple-peer-to-peer-chat-application-using-WCF-n" target="_blank" title="New Window">^</a>]<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4524824" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4524898/Re-Is-this-application-a-P2P-system.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4524898" data-ref="3_4524898" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4379663_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4379663xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4379663" parent="0" thread="4379663" href="http://www.codeproject.com/Messages/4379663/How-to-use-the-sample-without-app-config.aspx">How to use the sample without app.config??</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=9457055">Member 9457055</a></td><td class="date">26-Sep-12  3:57&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4379663_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="9457055" msgid="4379663" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">How to use the sample without app.config?? I don't want to store the config information into app.config.<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4379663" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4379663/How-to-use-the-sample-without-app-config.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4379663" data-ref="3_4379663" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4342164_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4342164xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4342164" parent="0" thread="4342164" href="http://www.codeproject.com/Messages/4342164/CopyTo-now-out-of-the-box.aspx">CopyTo now out of the box</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=612484">warnov</a></td><td class="date">18-Aug-12  18:56&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4342164_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="612484" msgid="4342164" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">First of all, let me congratulate you for such a great article and nice solution you've done...<br>
&nbsp;<br>
Second, have you noticed that CopyTo now is a native method of Stream?<br>
&nbsp;<br>
I just found very special that they called the same way you called your extension method.<br>
Do you have an story about this?<br>
&nbsp;<br>
Thanks!<br>
<div class="signature">Open mind for a different view.<br>
http://warnov.com</div><br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4342164" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4342164/CopyTo-now-out-of-the-box.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4342164" data-ref="3_4342164" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4055194_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx4055194xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="4055194" parent="0" thread="4055194" href="http://www.codeproject.com/Messages/4055194/Getting-an-Error.aspx">Getting an Error</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=5743553">varun surana</a></td><td class="date">18-Oct-11  3:05&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F4055194_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="5743553" msgid="4055194" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">Hello,<br>
 <br>
I tried using net.tcp://74.208.195.53:5000 in your code to upload files to my remote server but i am getting the follwoing error<br>
 <br>
<b>An unhandled exception of type 
'System.ServiceModel.EndpointNotFoundException' occurred in mscorlib.dll
 Additional information: Could not connect to 
net.tcp://74.208.195.53:5000/. The connection attempt lasted for a time 
span of 00:00:21.0122019. TCP error code 10060: A connection attempt 
failed because the connected party did not properly respond after a 
period of time, or established connection failed because connected host 
has failed to respond 74.208.195.53:5000.</b><br>
 <br>
Can someone please tell what i am doing wrong.<br>
 <br>
Thanks<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=4055194" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4055194/Getting-an-Error.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF4055194" data-ref="3_4055194" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F3942405_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx3942405xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="3942405" parent="0" thread="3942405" href="http://www.codeproject.com/Messages/3942405/Resuming-uploads-and-downloads.aspx">Resuming uploads and downloads</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=5621335">Christian Suarez</a></td><td class="date">29-Jun-11  6:10&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F3942405_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="5621335" msgid="3942405" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">Great article!! Any ideas about resuming 
uploads and downloads?? I was looking at the msdn article about chunking
 channel but it's still confused, maybe there is another approach. 
Thanks.<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=3942405" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/3942405/Resuming-uploads-and-downloads.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF3942405" data-ref="3_3942405" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F3737268_h0" class="header hover-row root">
						<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr>
								<td class="indent" width="20px"><a name="xx3737268xx"></a><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" width="16px" height="16px"></td><td class="subject hover-container"><a class="message-link" name="3737268" parent="0" thread="3737268" href="http://www.codeproject.com/Messages/3737268/Multiple-Downloads-not-supported.aspx">Multiple Downloads not supported</a> <a onclick="return Pin(this);" href="#" title="Click to pin message"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" width="13px" height="13px"></a></td><td class="icon"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/icn-member-16.gif" title="member" alt="member" border="0" height="16px"></td><td class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=2131938">GilZhaiek</a></td><td class="date">17-Jan-11  11:41&nbsp;</td>
							</tr>
						</tbody></table></td>
					</tr><tr id="F3737268_h1" class="content root selected" style="display:none;">
						<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
							<tbody><tr valign="top">
								<td class="indent align-right" style="width:20px;"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" width="20px" height="1px"><div class="voteform vertical" ownerid="2131938" msgid="3737268" votingtype="GoodOrBad">

								</div></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
									<tbody><tr>
										<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
											<tbody><tr>
												<td colspan="2">The stream is being sent back.  Only when the client has finished downloading another client can start a new download.<br>
I believe there is a problem with multiple connections in the same time.<br>
&nbsp;<br>
If you add this to GetFile (after you create a stream):<br>
&nbsp;<br>
<pre>OperationContext clientContext = OperationContext.Current;
clientContext.OperationCompleted += <span class="code-keyword">new</span> EventHandler(<span class="code-keyword">delegate</span>(object sender, EventArgs args)
{
   <span class="code-keyword">if</span> (_stream != null)
   {
     _stream.Dispose();
   }
});
</pre>
&nbsp;<br>
You will see a new GetFile will be called only when the OperationCompleted has exited.<br>
&nbsp;<br>
Any help?  Am I doing something wrong?<br></td>
											</tr><tr class="footer" style="vertical-align:top;">
												<td><a href="http://www.codeproject.com/script/Membership/LogOn.aspx?rp=%2fArticles%2f33825%2fWCF-TCP-based-File-Server">Sign In</a>·<wbr><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;sort=Position&amp;spc=Relaxed&amp;tid=3737268" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/3737268/Multiple-Downloads-not-supported.aspx" title="Get permanent link">Permalink</a></td><td style="text-align:right;"><span id="MVF3737268" data-ref="3_3737268" class="rating-label" style="white-space:nowrap;"></span></td>
											</tr>
										</tbody></table></td>
									</tr>
								</tbody></table></td>
							</tr>
						</tbody></table></td>
					</tr><tr>
						<td><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/t_003.gif" alt="" border="0" width="1px" height="5px"></td>
					</tr>
				</tbody></table></td>
			</tr><tr>
				<td><table cellpadding="2px" cellspacing="0" width="100%">
					<tbody><tr class="footer">
						<td>Last Visit: 31-Dec-99  18:00 &nbsp; &nbsp; Last Update: 28-Dec-13  3:43</td><td><a href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed">Refresh</a></td><td style="text-align:right;white-space:nowrap;"><input id="_mbnUrl" value="/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=11" type="hidden"><span class="nav-link selected">1</span><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=11#xx0xx">2</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=21#xx0xx">3</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=31#xx0xx">4</a> <a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?fid=1536772&amp;df=90&amp;mpp=10&amp;noise=1&amp;prof=True&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=11#xx0xx">Next »</a></td>
					</tr>
				</tbody></table></td>
			</tr>
		
	</tbody></table><p class="small-text"><img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" width="16px" height="16px"> General &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_news.gif" alt="News" align="top" width="16px" height="16px"> News &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_idea.gif" alt="Suggestion" align="top" width="16px" height="16px"> Suggestion &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" width="16px" height="16px"> Question &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_bug.gif" alt="Bug" align="top" width="16px" height="16px"> Bug &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" width="16px" height="16px"> Answer &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_joke.gif" alt="Joke" align="top" width="16px" height="16px"> Joke &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_rant.gif" alt="Rant" align="top" width="16px" height="16px"> Rant &nbsp;&nbsp; <img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/msg_admin.gif" alt="Admin" align="top" width="16px" height="16px"> Admin &nbsp;&nbsp; </p><p class="small-text">Use Ctrl+Left/Right to switch messages, Ctrl+Up/Down to switch threads, Ctrl+Shift+Left/Right to switch pages.</p>

				

			</div>
			
		</div></td>
		<td>
			<div id="ctl00_RightSideBar" class="container-article-info">

				<div class="header">About Article</div>
				<div class="article-summary">

					
					

					
					

					
					<div class="summary"><span id="ctl00_ArticleDescr">Shows you how to implement a remote file repository using WCF.</span></div>

					<a id="ctl00_InfoBox_ParentLink"></a>

<table class="article-info" cellpadding="0" cellspacing="0">

	
	<tbody><tr><td>Type&nbsp;</td><td class="value"><a id="ctl00_InfoBox_TypeName" href="http://www.codeproject.com/script/Articles/Types.aspx?#Article">Article</a></td></tr>
	

	<tr><td>Licence&nbsp;</td><td class="value"><a href="http://www.codeproject.com/info/cpol10.aspx" title="The Code Project Open License (CPOL)">CPOL</a></td></tr>

	

	<tr><td>First Posted&nbsp;</td><td class="value" nowrap="nowrap"><span itemprop="datePublished" content="2009-03-02">2 Mar 2009</span></td></tr>

	<tr><td>Views&nbsp;</td><td class="value">90,044</td></tr>

	
	<tr><td>Downloads&nbsp;</td><td class="value">4,926</td></tr>
		

	
	<tr><td>Bookmarked&nbsp;</td><td class="value">143 times</td></tr>
	

	

	
	
	
	<tr><td colspan="2"></td>
	</tr>
	
	
</tbody></table>

					<div class="tags"> 
					<span id="ctl00_TagsList_TagWrp" class="tags">
	
	
	
	<span id="ctl00_TagsList_VisibleTags"><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/.NET3.0">.NET3.0</a></span><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/.NET3.5">.NET3.5</a></span><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/C--hash--">C#</a></span><br><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/Windows">Windows</a></span><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/Architect">Architect</a></span><span class="t"><a rel="tag" href="http://www.codeproject.com/Tags/Dev">Dev</a></span></span><acronym id="ctl00_TagsList_HiddenTags" title="plus: WCF, Beginner, Intermediate">, +</acronym> 

	
	
</span>

					</div>

					<div class="nowrap align-left">
						 

<a id="ctl00_ActionLinks_PrintLnk" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?display=Print">
	<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/print.gif" style="border:0" width="46px" height="46px">
</a>

<a id="ctl00_ActionLinks_MailLink" href="http://www.codeproject.com/script/common/TellFriend.aspx?obtid=2&amp;obid=33825">
	<img src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/email.gif" style="border:0" width="46px" height="46px">
</a>
					</div>

					
				</div>

				<div style="width:160px;margin: 10px auto;">
					<div class="msg-160x600" data-format="160x600" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="ros" data-tags=".NET3.0, .NET3.5, C#, Windows, Architect, Dev, WCF, Beginner, Intermediate,rating4.5"></div>
				</div>

				
<div class="padded-top">
<div class="header">Top News</div>

<p><a id="ctl00_News_News_ctl01_Link" href="http://www.computerworld.com/s/article/9244757/Microsoft_bets_on_Windows_XP_disaster">Microsoft bets on Windows XP disaster</a></p>

Get the <a id="ctl00_News_News_ctl02_Subscribe" href="http://www.codeproject.com/Feature/Insider/">Insider News</a> free each morning.
</div>

				

				<div class="padded-top">
					
	<div id="ctl00_RelatedVideos_RelatedResults_ctl00_header" class="header">Related Videos</div>
	<div class="content-list align-center">	
	
	<div class="content-list-item">
		<a id="ctl00_RelatedVideos_RelatedResults_ctl01_Link" class="title" href="http://codeproject.tv/video/6906813/hands-on_visual_studio_2010_with_windows_phone_7_and_sql_azure"><img id="ctl00_RelatedVideos_RelatedResults_ctl01_Thumbnail" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/hands-on-visual-studio-2010-with-windows-phone-7-100x88.png" style="border-style:None;width:125px;border-width:0px;"></a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedVideos_RelatedResults_ctl02_Link" class="title" href="http://codeproject.tv/video/5005757/reading_files_on_the_server"><img id="ctl00_RelatedVideos_RelatedResults_ctl02_Thumbnail" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/php-Thumbnail.png" style="border-style:None;width:125px;border-width:0px;"></a>
		
	</div>
	
	</div>
	

				</div>
				<div class="padded-top">
					
	<div id="ctl00_RelatedArticles_RelatedResults_ctl00_header" class="header">Related Articles</div>
	<div class="content-list">	
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl01_Link" class="title" href="http://www.codeproject.com/Articles/406096/A-Beginners-Tutorial-for-Understanding-Windows-Com">A Beginner's Tutorial for Understanding Windows Communication Foundation (WCF)</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl02_Link" class="title" href="http://www.codeproject.com/Articles/5954/Csharp-class-for-connecting-via-a-SOCKS5-Proxy-Ser">C# class for connecting via a SOCKS5 Proxy Server</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl04_Link" class="title" href="http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and-">WCF Concurrency (Single, Multiple, and Reentrant) and Throttling</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl05_Link" class="title" href="http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service">Implementing a Basic Hello World WCF Service</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl06_Link" class="title" href="http://www.codeproject.com/Articles/86007/Three-ways-to-do-WCF-instance-management">Three ways to do WCF instance management</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl07_Link" class="title" href="http://www.codeproject.com/Tips/127248/How-to-replace-Machine-Name-with-Domain-name-in-WC">How to replace Machine Name with Domain name in WCF Service wsdl link</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl08_Link" class="title" href="http://www.codeproject.com/Articles/38793/6-Steps-to-Enable-Transactions-in-WCF">6 Steps to Enable Transactions in WCF</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl09_Link" class="title" href="http://www.codeproject.com/Articles/127395/Implementing-a-WCF-Service-with-Entity-Framework">Implementing a WCF Service with Entity Framework</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl10_Link" class="title" href="http://www.codeproject.com/Articles/36683/Nine-simple-steps-to-enable-X-509-certificates-on-">Nine simple steps to enable X.509 certificates on WCF</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl11_Link" class="title" href="http://www.codeproject.com/Articles/33896/Invoking-a-Web-Service-without-using-a-Proxy-by-us">Invoking a Web Service without using a Proxy by using WCF Adapter in BizTalk Server 2006 R2</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl12_Link" class="title" href="http://www.codeproject.com/Articles/566691/WCF-From-a-Beginners-perspective-a-Tutorial">WCF: From a Beginner's perspective &amp; a Tutorial</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl13_Link" class="title" href="http://www.codeproject.com/Articles/149738/Basic-Authentication-on-a-WCF-REST-Service">Basic Authentication on a WCF REST Service</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl14_Link" class="title" href="http://www.codeproject.com/Articles/102656/Downloading-in-Chunks-using-WCF-and-Silverlight">Downloading in Chunks using WCF and Silverlight</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl15_Link" class="title" href="http://www.codeproject.com/Articles/38857/WCF-FAQ-Part-5-Transactions">WCF FAQ Part 5 – Transactions</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl16_Link" class="title" href="http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery">Calling WCF Services using jQuery</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl17_Link" class="title" href="http://www.codeproject.com/Articles/29243/A-Windows-Communication-Foundation-WCF-Overview">A Windows Communication Foundation (WCF) Overview</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl18_Link" class="title" href="http://www.codeproject.com/Articles/28248/Securing-WCF-Services-with-Certificates">Securing WCF Services with Certificates</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl19_Link" class="title" href="http://www.codeproject.com/Articles/311342/Deploying-WCF-and-Silverlight-Applications-on-IIS-">Deploying WCF and Silverlight Applications on IIS 5 and 7</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl20_Link" class="title" href="http://www.codeproject.com/Articles/16055/Microsoft-Robotics-Studio-MSRS-and-Windows-Communi">Microsoft Robotics Studio (MSRS) and Windows Communication Foundation (WCF) Work Together</a>
		
	</div>
	
	<div class="content-list-item">
		<a id="ctl00_RelatedArticles_RelatedResults_ctl21_Link" class="title" href="http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP">WCF Streaming: Upload/Download Files Over HTTP</a>
		
	</div>
	
	</div>
	

				</div>
				<div class="padded-top">
					
	<div id="ctl00_RelatedLibrary_RelatedResults_ctl00_header" class="header">Related Research</div>
	<div class="content-list align-center">	
	
	<div class="content-list-item">
		<div><img id="ctl00_RelatedLibrary_RelatedResults_ctl01_Thumb" class="shadow" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/LibraryItemThumbnail_45_100x124.png" style="border-width:0px;"></div>
		<a id="ctl00_RelatedLibrary_RelatedResults_ctl01_Link" class="title" href="http://www.codeproject.com/ResearchLibrary/45/Ten-Tips-of-Web-App-Testing">Ten Tips of Web App Testing</a>
		
	</div>
	
	<div class="content-list-item">
		<div><img id="ctl00_RelatedLibrary_RelatedResults_ctl02_Thumb" class="shadow" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/agile-software-testing.png" style="border-width:0px;"></div>
		<a id="ctl00_RelatedLibrary_RelatedResults_ctl02_Link" class="title" href="http://www.codeproject.com/ResearchLibrary/20/Learn-Agile-Ten-Tips-for-Launching-and-Testing-Hig">Learn Agile: Ten Tips for Launching and Testing High Quality Apps for the American Market</a>
		
	</div>
	
	</div>
	

				</div>

				
				
			</div>
		</td>
		</tr></tbody></table>

		
		<div class="theme1-background" style="height:2px"></div>

		<div class="extended tiny-text">
			<div class="row">
				<div class="float-left">
					<a id="ctl00_PermaLink" itemprop="url" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server">Permalink</a> | 
					<a id="ctl00_AdvertiseLink" href="http://developermedia.com/">Advertise </a> |
					<a id="ctl00_PrivacyLink" href="http://www.codeproject.com/info/privacy.aspx">Privacy</a> |
					<a id="ctl00_Mobile" rel="nofollow" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?display=Mobile">Mobile</a>
					<br>
								
					
					Web03 |
					2.7.131219.1 |
					Last Updated 2 Mar 2009								
				</div>
				<div class="float-right align-right">
					Article Copyright 2009 by StevenHobbs<br>Everything else
					Copyright © <a href="mailto:webmaster@codeproject.com">CodeProject</a>, 1999-2013 <br>
					<a id="ctl00_TermsOfUseLink" href="http://www.codeproject.com/info/TermsOfUse.aspx">Terms of Use</a>
				</div>

				


<div class="page-width">
Layout: <a id="ctl00_PageWidth_FixedT" title="Fixed width layout" rel="nofollow" class=" active" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?PageFlow=FixedWidth">fixed</a>
|
<a id="ctl00_PageWidth_FluidT" title="Fluid layout" rel="nofollow" href="http://www.codeproject.com/Articles/33825/WCF-TCP-based-File-Server?PageFlow=Fluid">fluid</a>
</div>



			</div>
		</div>
		

		<br clear="all">
		
			

	</div> 
	</div>
</div>


<div style="display:none;" id="lqm_AdTable">
	
</div>


<script type="text/javascript" language="Javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/jquery.js"></script><script type="text/javascript">//<![CDATA[
if (typeof jQuery == 'undefined') {
    document.write(unescape("%3Cscript src='/script/JS/jquery-1.6.2.min.js' type='text/javascript' %3E%3C/script%3E"));
}//]]></script>
<script type="text/javascript" language="Javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/article.js"></script>
<script type="text/javascript" language="Javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/navbar.js"></script>
<script type="text/javascript" language="Javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/Notifications.js"></script>
<script type="text/javascript" language="Javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/MemberProfilePopup.js"></script>
<script type="text/javascript" language="Javascript">//<![CDATA[
$(document).ready(function() { anchorAnimate(); });
(function(d, s, id) {  var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));setTimeout(function () {  document.getElementById('fb-wrap').style.display = '';}, 3000);
(function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/plusone.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })();
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){ js=d.createElement(s);js.id=id; js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
var DMReportsOK = null;function showDMAlert() {   var $div = $('div.msg-728x90');  $div.append($('<img src="/images/alert-top-block.gif" style="right:0;position:absolute;z-index:0">'));}function onDMcallBack(event){   if (event.originalEvent) event = event.originalEvent;   jQuery.support.cors = true;   if (event.data == 'DM-disabled') DMReportsOK = false;   else if (event.data == 'DM-enabled') DMReportsOK = true;}function checkLoaded() {  var recordCheck  = false; var showBlockMsg = false; var block        = 'None'; if (!DMReportsOK && block == 'None' && typeof DMAds === 'undefined')     block = 'ResourceBlocked'; if (DMReportsOK === true) block = 'None'; else if (DMReportsOK === false) block = 'DomModified'; if (recordCheck) {  $.ajax({ url:'/script/AdServe/Ajax/VS.aspx',data:{'adbm':block}, cache:false, async:true }); } if (showBlockMsg && block != 'None')    showDMAlert();}$(document).ready(function() {  $(window).bind('message', onDMcallBack);  setTimeout(checkLoaded, 4000);});
$(function ()
                {
                    $('.oauth').click(function () {
                        $this = $(this);
                        href = $this.attr('href');
                        var myWindow = window.open(href, 'popup',
                                    'width=800,height=600,location=0,menubar=0,resizeable=0,scrollbars=0,toolbar=0');
                        myWindow.focus();
                        var timer = setInterval(function () {
                                        if (myWindow.closed) {
                                            clearInterval(timer);
                                            // window.location.reload(); // May do a POST reload, shows a warning
                                            window.location = window.location; // force a GET reload
                                        }
                                    }, 200);
                        return false;
                    });
                });
var oSrchFlt = false, oSrchBox=false,srchBoxFoc=false;
$(document).ready(function() {
 if(InitWatermark)InitWatermark('sb_tb', 'Search for articles, questions, tips');
 var sbar = $('#sb_tb'); 
 var sfilter = $('#SearchFilter');
 if (sbar && sfilter) {
  sfilter.removeClass('popup'); sfilter.hide();
  sbar.blur(function() {
 if (!oSrchFlt)sfilter.hide();
 srchBoxFoc=false;
 /*sbar.animate( { width:'210px' }, { queue:false, duration:300 });
*/ });
  sbar.focus(function() {
 oSrchFlt=false;srchBoxFoc=true;
 sfilter.show();
 /*sbar.animate( { width:'500px' }, { queue:false, duration:300 });
*/ });
  sbar.mouseleave(function() { oSrchBox=false; });
  sbar.mouseover(function() { oSrchBox=true; });
  sfilter.mouseleave(function() { oSrchFlt=false; if (!srchBoxFoc&&!oSrchBox)sfilter.hide();});
  sfilter.mouseover(function() { oSrchFlt=true; });
 }
});
$('#clear-rate_ctl00_RateArticle_RCD').click(function () {    $('#ctl00_RateArticle_RCD').hide(); return false;});$("#ctl00_RateArticle_RateItemWrapper")   .removeClass("container-rating")   .hover( function() { $('#ctl00_RateArticle_RCD').fadeIn('fast'); },            function() { $('#ctl00_RateArticle_RCD').fadeOut('fast'); } );
function PostBack_ctl00_RateArticle_RateItemWrapper() {
  return rateItem(33825,2,1,true,true,3,'LargeStars');
}

                        function getVotesHistogram(objectId, objectTypeId, containerId, loadingId) {
                            if (!$('#' + containerId).attr('alreadyRequested')){
                                $.ajax({
                                    url: '/script/Ratings/Ajax/Histogram.aspx?obid=' + objectId + '&obtid='+objectTypeId,
                                    success: function (data) {
                                        $('#' + containerId).html(data);
                                        $('#' + loadingId).hide();
                                    }
                                });
                                $('#' + containerId).attr('alreadyRequested', 'true');
                            }
                        }
$(document).ready(function() {   new starRating('#ctl00_RateArticle_VoteFormDiv', PostBack_ctl00_RateArticle_RateItemWrapper,'ctl00_RateArticle');
  $('#ctl00_RateArticle_RB').mouseenter(function() {     getVotesHistogram(33825,2   ,'ctl00_RateArticle_Histogram','ctl00_RateArticle_Loading');  })})
$(document).ready(function() { $('#ctl00_RateArticle_SubmitRateBtn').hide(); });
$(document).ready(function() { $('#ctl00_RateArticle_SubmitRateBtn').hide(); });function ChkRtctl00_RateArticle(val) {showCommentBox('ctl00_RateArticle', val<=3||true);
}

forumDir = '/script/Forums/';
staticServer = 'http://s.codeproject.com';
allowReporting = false;
allowRating = false;
allowRatingDisplay = true;
var smoothScroll = false;
Selected        = -1;
oldTitle        = document.title;
minMessageScore = 1;
minMessageScore = 5;
abuseScore      = -2;
spamScore       = -1;
getRatingUrl    = '/script/Ratings/Ajax/GetRatings.aspx';
noiseThreshold  = 1;
getRatingRefKey = 'obrs';


//]]>
</script>



<canvas id="cv1" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas><canvas id="cv2" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas><div style="display: none; position: absolute;" id="MemberProfilePopupDiv" class="raised box"></div><div style="display: none; position: absolute;" id="MemberProfilePopupDiv" class="raised box"></div><div style="display: none; position: absolute;" id="MemberProfilePopupDiv" class="raised box"></div><iframe style="position: absolute; width: 1px; height: 1px; top: 0px; left: 0px; visibility: hidden;"></iframe><div style="position: absolute; width: 1px; height: 1px;" id="dp_swf_engine"><object style="width: 1px; height: 1px;" id="_dp_swf_engine" data="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/swf.swf" type="application/x-shockwave-flash" width="1" height="1"><param value="always" name="allowscriptaccess"></object></div></body><script type="application/x-javascript" src="WCF%20TCP-based%20File%20Server%20-%20CodeProject_files/opt_content.js"></script></html>