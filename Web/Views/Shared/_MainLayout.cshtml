@*using StackExchange.Profiling;*@
@using Cats.Services.Security;
@using Cats.Helpers;

@{
    UserIdentity user = (UserIdentity)HttpContext.Current.User.Identity;
    string theme = "default";
    var spanWidth = "span12";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" type="image/ico" href="~/Content/images/CATS_Blue.ico">
    <title>@ViewBag.Title @Html.Translate("- CATS")</title>
    <link href="~/Scripts/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Scripts/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Scripts/css/cats.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts/js/bootstrap.min.js"></script>



</head>
<body>

    @Html.Partial("_MainMenu")

    <div class="bdy container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ol class="breadcrumb">
                    <li><a href="#">Home</a></li>
                    @RenderSection("Breadcrumb", required: false)

                        @Html.Partial("_BreadCrumb")
            </ol>
            </div>
            </div>
       
        <div class="row">
            @{
                if (IsSectionDefined("LeftBar"))
                {
                    spanWidth = "span10";
                    <div class="span2 column-divider">
                        <div class="sidebar-nav">
                            <ul class="nav nav-list">
                                @RenderSection("LeftBar", required: false)
                            </ul>
                        </div>
                        <!--/.well -->
                    </div>
                }
            }

            <!--/span-->
            <div class="@spanWidth">
                <div>
                    <div class="span7" style="margin-top: -20px;">
                       
                    </div>
                    <div class="span5" style="margin-top: -20px;">
                        <div class="pull-right btn-toolbar toolbar">
                            @RenderSection("Toolbar", required: false)
                            @Html.Partial("_ToolbarCommon")
                        </div>
                    </div>

                </div>
                <div style="clear: both;" class="message-window">@RenderSection("Errors", required: false)@Html.CustomValidationSummary()</div>
                <div style="clear: both;">
                    @RenderBody()
                </div>
            </div>
            <!--/span-->
        </div>
        <!--/row-->
        <hr>
        <footer>
            @Html.Partial("_Version")
        </footer>

        <div id="div_help_panel" style="display: none;">
            <style>
                .left_panel {
                    position: fixed;
                    left: -510px;
                    top: 0px;
                    border: solid 1px #ccc;
                    width: 25%;
                    bottom: 0px;
                    background: rgba(0,0,0,0.8);
                }

                .left_panel * {
                    color: #FFF;
                }

                .left_panel .content {
                    margin-top: 60px;
                    padding: 4px;
                }
            </style>
            <script>
                $(document).ready(function () {

                    $("#toolbar_btn_help").click(function () {
                        var curPosition = $("#div_content_panel").css("left");
                        if (curPosition == '0px') {
                            $("#div_content_panel").animate({ "left": "-=510px" }, "slow");
                        }
                        if (curPosition == '-510px') {
                            $("#div_content_panel").animate({ "left": "+=510px" }, "slow");
                        }
                    });

                });

            </script>
            <div id="div_content_panel" class="left_panel">
                <div class="content">
                    Help Content
                </div>
            </div>
        </div>
    </div>
    <!--/.fluid-container-->
    <!-- javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    @RenderSection("Scripts", required: false)

    <script src="~/Content/assets/js/jquery.validate.min.js"></script>
    <script src="~/Content/assets/js/jquery.validate.js"></script>

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    <link href="~/Scripts/Beka.EthDate/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />
    <link href="~/Scripts/Beka.EthDate/calendar.css" rel="stylesheet" type="text/css" />


    <script type="text/javascript" src="~/Scripts/js/highcharts.js"></script>
    <script type="text/javascript" src="~/Scripts/js/exporting.js"></script>



    <script type="text/javascript">
    @{
        var calendarPreference = Html.UserCalendarPreference();
      }
        init_datepicker("@calendarPreference");


        //Script to generate row number
        /*
        
        */
        var rowNumber = 0;

        function resetRowNumber(e) {
            rowNumber = 0;
        }

        function renderNumber(data) {
            return ++rowNumber;
        }

    </script>



    <script type="text/javascript">
        var datepreferencedisplay = "@Html.Translate(@Html.UserCalendarPreference())";
        var unitpreferencedisplay = "@Html.Translate(@Html.UserUnitPreference())";

        $(function () {

            //For label
            $(".cats-date-pref").append(' (' + datepreferencedisplay + ')');
            $(".cats-unit-pref").append(' (' + unitpreferencedisplay + ')');
            //For grid
            $(".cats-date-pref-grid >.k-link").append("(" + datepreferencedisplay + ")");
            $(".cats-unit-pref-grid >.k-link").append("(" + unitpreferencedisplay + ")");
            /*each(function () {
                $(this).append("(" + datepeferencedisplay + ")");

            });*/
        });

        function toCatsPreferedUnit(data) {
            if (unitpreferencedisplay.toLowerCase() != "mt") {
                return data / 10;
            } else {
                return data;
            }
        }

    </script>

    @*@MiniProfiler.RenderIncludes()*@
    <!-- JIRA Collector scripts -->
    @*<script type="text/javascript" src="https://cats-edge.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e/en_US-d926hj-1988229788/6207/22/1.4.3/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=630f8204"></script>*@



</body>
</html>
