@model  IEnumerable<Cats.Models.Bid>

@{
    ViewBag.Title = "Create Bid";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
<script>
     
    function onApprove(id){
        var agree=confirm("Are you sure you want to approve this bid?");
        if (agree)
            window.location = "bid/ApproveBid/" + id;
    }
</script>
<div class="well">
    <h4 class="page-header"> Bid For Transporters</h4>
    
</div>

@section LeftBar
{
    @using (Html.BeginForm("Index","Bid",FormMethod.Get))
    {
        <p class="control-list">Search:</p>
        <div class="control-group">
            <label class="control-label">Bid Number</label>
            <div class="controls">
                @Html.TextBox("BidNumber")
            </div>
            <label class="control-label">Status:</label>
            @foreach (string statusType in ViewBag.BidStatusTypes)
            {
            <div class="controls">
                @Html.CheckBox(statusType)
                @Html.Label(statusType)
            </div>
            }
            @Html.Hidden("statusTypes","All")
        </div>

        <div class="control-group">
            <div class="controls">
                <input type="submit" value="Filter" class="btn btn-primary"/>
                 @Html.ActionLink("Create Bid", "Create")
            </div>
        </div> 
        
    }

}

<table class="table table-striped table-bordered">
    <tr>
        <th>SNO</th>
        <th>
            Bid Number
            @*@Html.DisplayNameFor(model => model.BidNumber)*@
        </th>        
        <th>
            Start Date
        </th>
        <th>
           End Date
        </th> 
        <th>
            Bid Opening Date
        </th>  
        <th>
           Status
        </th>
        <th></th>
    </tr>
    @{ int sno = 1;}
    @foreach (var item in Model)
    {
        <tr>
            <td>@sno</td>
            <td>
                <a href="@Url.Action("Edit", "Bid", new { Area = "Procurement", id = item.BidID })">@Html.DisplayFor(modelItem => item.BidNumber)</a>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.StartDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EndDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem=>item.OpeningDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem=>item.Status.Name)
            </td>
            <td>
                @{
                    var status = item.StatusID == 1 ? "" : "hidden";
                }
                <div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-cog"></i>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="@Url.Action("EditBidStatus", "Bid", new {Area = "Procurement", id = item.BidID})">Edit</a></li>
                        <li><a href="@Url.Action("Details", "Bid", new {Area = "Procurement", id = item.BidID})">Detail</a></li>
                        @*<li><a href="@Url.Action("ApproveBid", "Bid", new {Area = "Procurement", id = item.BidID})">Approve</a></li>*@
                    </ul>
                </div>
                <input class="btn btn-success @status" type="button" value="Approve" onclick=" onApprove(@item.BidID); "/>
            </td>
        </tr>
        sno++;
    }

</table>
