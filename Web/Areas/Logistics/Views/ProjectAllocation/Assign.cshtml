@using Cats.Services.Security
@model IList<Cats.Models.RequisitionViewModel>
@using LanguageHelpers.Localization
@{
    ViewBag.Title = "PC/SI Assignment";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

@{
    
    var user = (UserIdentity)System.Web.HttpContext.Current.User.Identity;
    var unitPreference = user.Profile.PreferedWeightMeasurment;
}
@section Toolbar
{
    
    <a class="btn toolbar-btn " data-submittedform="frmHub"  >Assign hub</a>
    
}
    
   




@using (Html.BeginForm("SaveProjectAllocation", "ProjectAllocation", FormMethod.Post, new { name = "frmHub", id = "frmHub" }))
{
    <fieldset>
        <legend>Projec Code/SI Assignment</legend>
    </fieldset>
    
    <input type="hidden" value="@ViewBag.ReqId" name="RequisitionId" />
    
    <div class="alert alert-block" id="Notification" style="display: none" >
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h4>Error!</h4>
    The amount allocated can not be greater than the remaining quantity
</div>
    
    
    
    <h5 align="right"> Metric: @unitPreference </h5>
    <div class="form-horizontal well">
       
        <div class="row">
            <div class="span4">
                <div class="control-group">
                     <label class="control-label">
                    @Translator.Translate("Requested Amount") </label>
                    <div class="controls">
                        <input type="text" class="icon-file-text-alt" id="Requested" name="Requested" value="@ViewBag.RequetedAmount" readonly="readonly" />    
                    </div>
                </div>
            </div>
           
            
            <div class="span4">
                <div class="control-group">
                     <label class="control-label">
                    @Translator.Translate("Hub") </label>
                    <div class="controls">
                        @Html.Hidden("hub")
                        <input type="text" id="hub" name="hub" value="@ViewBag.Hub" readonly="readonly" />
                    </div>
                </div>
            </div>
        </div>
       
        <div class="row">
            <div class="span4">
                <div class="control-group">
                     <label class="control-label">
                    @Translator.Translate("Reamining")</label>
                    
                    <div class="controls">
                        @Html.Hidden("reamaining")
                        <input type="text" id="Remaining" name="Remaining" value="@ViewBag.Remaining" readonly="readonly"/>
                    </div>
                </div>
            </div>
             
            <div class="span4">
                <div class="control-group">
                     <label class="control-label">
                    @Translator.Translate("Date") </label>
                    <div class="controls">
                        <input type="text" class="cats-datepicker2" id="datepicker" name="datepicker" >
                    </div>
                </div>
            </div>
        </div>
        
        <fieldset>
            <legend></legend>

        
        <div class="row" >
            <div class="span4">
                <div class="control-group ">
                    <label class="control-label">Project Code</label>
                    <div class="controls">
                        @Html.Hidden("PC")
                        @Html.DropDownList("PCCode", ViewBag.PC as SelectList, "Select PC", new { id = "ProjectCodeID" })
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">PC Quantity</label>
                    <div class="controls">
                       @Html.Hidden("PCQty")
                        <input type="text" id="PCodeqty" name="PCodeqty" />
                    </div>
                </div>

            </div>
            <div class="span4">
                <div class="control-group">
                    <label class="control-label">SI Code</label>
                    <div class="controls">
	                
                        @Html.Hidden("SI")
                        @Html.DropDownList("SICode", ViewBag.SI as SelectList, "Select SI", new { id = "ShippingInstructionID" })
                      </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">SI Quantity</label>
                    <div class="controls">
                        @Html.Hidden("SIQty")
                        <input type="text" id="SICodeqty" name="SICodeqty" />
                    </div>
                </div>
            </div>
        </div>
       </fieldset>
        
       
    </div>
    
    
}

<script  >
    $(document).ready(function () {
        // storing selected value to hidden field
        $("#SI").val($("#ShippingInstructionID").val());
        $("#PI").val($("#ProjectCodeID").val());
        $("#PCQty").val($("#PCodeqty").val());
        $("#SIQty").val($("#SICodeqty").val());
        $("#HubId").val($("#hub").val());

    
    })


</script>

 <script type="text/javascript">
     $(document).ready(function () {
         //Dropdownlist Selectedchange event
         var SItext;
         var ProjectCodetext;
         $('#ShippingInstructionID').change(function () {
             // Get Dropdownlist seleted item text
             SItext = $("#ShippingInstructionID option:selected").text();
             alert(text);
             // Get Dropdownlist selected item value
             var sIvalue = $("#ShippingInstructionID").val();
             alert(sIvalue);
              

             
         })
          
         $('#ProjectCodeID').change(function () {
             // Get Dropdownlist seleted item text
             ProjectCodetext = $("#ProjectCodeID option:selected").text();
             alert(text);
             // Get Dropdownlist selected item value
             var projectCodevalue = $("#ProjectCodeID").val();
             alert(projectCodevalue);


             
         })
          
         if (SItext == "Select SI" && ProjectCodetext == "Selected Project code") {
             alert("Please select Project code or SI ")
             return false;
         }
         return true
     });
 </script>