@using Cats.Areas.Logistics.Models
@using Cats.Helpers
@using Cats.Models
@using Cats.Services.Security
@using Kendo.Mvc.UI
@model IEnumerable<TransporterPaymentRequestViewModel>
@{
    ViewBag.Title = "PaymentRequests";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
@section Toolbar
{
    <div class="btn-group" style="right: 100px">
        <a class="btn btn-default" href="@Url.Action("PrintLetter", "TransporterPaymentRequest", new { Area = "Logistics", id = ViewBag.TransportOrderViewModel.TransporterID })" >Print Letter</a>
        <button class="btn btn-default" onclick="print_payment_request()">Print</button>
    </div>
    <script type="text/javascript">
        function print_payment_request() {
            var refNo = $("#filter").val();
            var programName = $("#program_filter").val();
            var urlName = "@Url.Action("PrintPaymentRequest", "TransporterPaymentRequest", new { transporterId = ViewBag.TransportOrderViewModel.TransporterID })";
            var finalurl = urlName + "&refno=" + refNo + "&programname=" + programName;
            window.location.href = finalurl;
        }
    </script>
}
@{
    int index = 0;
    var transportOrderViewModel = ViewBag.TransportOrderViewModel;
}
<html data-ng-app="PaymentRequestManagementModule">
    <head>
        <style>
            .errorText
            {
                color: red;
            }
            #messageboxPayDeduct {
                color: springgreen;
                font-weight: bold;
                font-size: 16px;
            }
            #messageboxPayDeductCheque {
                color: springgreen;
                font-weight: bold;
                font-size: 16px;
            }
        </style>
    </head>
    <body data-ng-controller="PaymentRequestManagementController">
        @*<div id='dialogDiv' class='modal hide fade in'>
            
        </div>*@
        
        <div id="modalLoss" class="form-horizontal" style="margin-top:30px;width:460px;height:180px;">
            @using (Html.BeginForm("LossAmount", "TransporterPaymentRequest", FormMethod.Post))
            {
                @Html.ValidationSummary(true)
                <div class="">
                    <div class="span3">
                        <div class="control-group">
                            <div class="control-label">
                                <label for="CommodityName">Shortage Qty</label>
                            </div>
                            <div class="controls">
                                <input type="text" id="FORMTransporterPaymentRequestForLossID" name="transporterPaymentRequestForLossID" style="display: none"/>
                                <input type="text" id="lossQty" name="lossQty"/><span id="errmsgLossQty_Amount" class="errorText"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="span3">
                        <div class="control-group">
                            <div class="control-label">
                                <label for="CommodityTarrif">Shortage Reason</label>
                            </div>
                            <div class="controls">
                                <input type="text" id="LossReason" name="LossReason"/>&nbsp;<span id="errmsgLossReason" class="errorText"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="span3" style="width: 400px;">
                        <div class="control-group message-box" style="float: left;" id="messageboxLossReason"></div>
                        <div class="control-group" style="float: right;">
                            <button id="btnSaveLoss" class="btn" type="submit">Save</button>
                        </div>
                    </div>
                </div>
            }
        </div>
        
        <script>
            var wndModalLoss;
            $(document).ready(function () {
                wndModalLoss = $("#modalLoss").kendoWindow({
                    title: "Loss Entry.",
                    modal: true,
                    visible: false,
                    resizable: false,
                    width: 520,
                    height: 220
                }).data("kendoWindow");
            });
        </Script>

        <div id="modalCommodityTarrif" class="form-horizontal" style="margin-top:30px;width:460px;height:180px;">
            @using (Html.BeginForm("EditCommodityTarrif", "TransporterPaymentRequest", FormMethod.Post))
            {
                @Html.ValidationSummary(true)
                <div class="">
                    <div class="span3">
                        <div class="control-group">
                            <div class="control-label">
                                <label for="CommodityName">Commodity</label>
                            </div>
                            <div class="controls">
                                <input type="text" id="FORMTransporterPaymentRequestID" name="transporterPaymentRequestID" style="display: none"/>
                                <input type="text" id="CommodityName" name="CommodityName" disabled="disabled"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="span3">
                        <div class="control-group">
                            <div class="control-label">
                                <label for="CommodityTarrif">Current Price</label>
                            </div>
                            <div class="controls">
                                <input type="text" id="CommodityTarrif" name="CommodityTarrif"/>&nbsp;<span id="errmsgCommodityTarrif_Amount" class="errorText"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="span3" style="width: 400px;">
                        <div class="control-group message-box" style="float: left;" id="messageboxCommodityTarrif"></div>
                        <div class="control-group" style="float: right;">
                            <button id="btnSaveCommodityTarrif" class="btn" type="submit">Save</button>
                        </div>
                    </div>
                </div>
            }
        </div>

        <script>
            var wndLabourCostInfo;
            $(document).ready(function () {
                wndLabourCostInfo = $("#modalCommodityTarrif").kendoWindow({
                    title: "Edit Commodity Tarrif",
                    modal: true,
                    visible: false,
                    resizable: false,
                    width: 500,
                    height: 220
                }).data("kendoWindow");
            });
        </script>

        <div id="modalChequeInfo" class="form-horizontal" style="margin-top:30px;width:530px;height:480px;">
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="PaymentRequestRefNo">Referrence No.</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.PaymentRequestRefNo}}" name="PaymentRequest.PaymentRequestRefNo" id="PaymentRequestRefNo" 
                                   data-ng-model="SelectedCheckInfo.PaymentRequestRefNo" disabled="disabled"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_CheckNo">Check No.</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.CheckNo}}" name="CheckInfo.CheckNo" id="CheckInfo_CheckNo" 
                                   data-ng-model="SelectedCheckInfo.CheckNo"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_PaymentVoucherNo">Payment Voucher No.</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.PaymentVoucherNo}}" name="CheckInfo.PaymentVoucherNo" id="CheckInfo_PaymentVoucherNo" 
                                   data-ng-model="SelectedCheckInfo.PaymentVoucherNo"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_BankName">Bank Name</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.BankName}}" name="CheckInfo.BankName" id="CheckInfo_BankName" 
                                   data-ng-model="SelectedCheckInfo.BankName"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_Amount">Amount</label>
                        </div>
                        <div class="controls">
                            @*<input type="text" value="{{SelectedCheckInfo.Amount}}" name="CheckInfo.Amount" id="CheckInfo_Amount" 
                                   data-ng-model="SelectedCheckInfo.Amount"/>*@
                            <input type="text" name="CheckInfo.Amount" id="CheckInfo_Amount" value="{{SelectedCheckInfo.Amount}}" data-ng-model="SelectedCheckInfo.Amount"/>&nbsp;<span id="errmsgCheckInfo_Amount" class="errorText"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_PreparedBy">Prepared By</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.PreparedBy}}" name="CheckInfo.PreparedBy" id="CheckInfo_PreparedBy" 
                                   data-ng-model="SelectedCheckInfo.PreparedBy" disabled="disabled"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="CheckInfo_AppovedBy">Appoved By</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.AppovedBy}}" name="CheckInfo.AppovedBy" id="CheckInfo_AppovedBy" 
                                   data-ng-model="SelectedCheckInfo.AppovedBy" disabled="disabled"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="span5">
                    <div class="control-group">
                        <div class="control-label">
                            <label for="datepicker">Appoved Date</label>
                        </div>
                        <div class="controls">
                            <input type="text" value="{{SelectedCheckInfo.Transporter}}" name="CheckInfo.AppovedDate"
                                   data-ng-model="SelectedCheckInfo.AppovedDate" disabled="disabled"/>
                        </div>
                    </div>
                </div>
            </div>
                
            <div class="">
                <div class="span5" style="width:400px;">
                    <div class="control-group message-box" style="float: left;" id="messageboxPayDeductCheque"></div>
                    <div class="control-group" style="float: right;">
                        <button id="btnSaveChequeInfo" class="btn" data-ng-click="editChequeInfo()">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var wndChequeInfo;
            $(document).ready(function () {
                wndChequeInfo = $("#modalChequeInfo").kendoWindow({
                    title: "Edit Cheque Info.",
                    modal: true,
                    visible: false,
                    resizable: false,
                    width: 550,
                    height: 520
                }).data("kendoWindow");
            });
        </Script>

        <div class="message-success" style="float: left;" id="messageboxCommodityTarrif"></div>
        <br/>
        <h4 class="page-header">@Html.Translate("Transporter Info.")</h4>
         
        <div class="control-group form-horizontal well">
            <div class="row">
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Transport Order No.
                        </div>
                        <div class="controls">  
                            <a href="@Url.Action("TransportOrderDetail", "TransporterPaymentRequest", new { transportOrderID = transportOrderViewModel.TransportOrderID })">
                                @transportOrderViewModel.TransportOrderNo
                            </a>
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Transporter
                        </div>
                        <div class="controls">
                            <a href="@Url.Action("TransporterDetail", "TransporterPaymentRequest", new { transporterID = transportOrderViewModel.TransporterID })">
                                @transportOrderViewModel.Transporter
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Contract N0.
                        </div>
                        <div class="controls">
                            <input id="ContractNumber" name="ContractNumber" value="@transportOrderViewModel.ContractNumber" disabled="disabled" />
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Order Date
                        </div>
                        <div class="controls">
                            <input id="OrderDateET" name="OrderDateET" value="@transportOrderViewModel.OrderDateET" disabled="disabled" />
                        </div>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Requested Dispatch Date
                        </div>
                        <div class="controls">
                            <input id="RequestedDispatchDateET" name="RequestedDispatchDateET" value="@transportOrderViewModel.RequestedDispatchDateET" disabled="disabled" />
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            Order Expiry Date
                        </div>
                        <div class="controls">
                            <input id="OrderExpiryDateET" name="OrderExpiryDateET" value="@transportOrderViewModel.OrderExpiryDateET" disabled="disabled" />
                        </div>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            StartDate
                        </div>
                        <div class="controls">
                            <input id="StartDate" name="StartDate" value="@transportOrderViewModel.StartDate" disabled="disabled" />
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="control-group">
                        <div class="control-label">
                            End Date
                        </div>
                        <div class="controls">
                            <input id="EndDate" name="EndDate" value="@transportOrderViewModel.EndDate" disabled="disabled" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <h3>Payment Requests</h3>
        
        <label for="filter" class="filter_label"><strong>Reference No.</strong></label>
        <input type="text" name="filter" value="" id="filter" />
        
        <label for="program_filter" class="filter_label"><strong>Program</strong></label>
        <select id="program_filter" name="program_filter">
            <option value="All" selected >All</option>
            <option value="Relief">Relief</option>
            <option value="PSNP">PSNP</option>
            <option value="IDPs">IDPs</option>
        </select>


        <table class="table table-striped" id="paymentrequesttable">
            <thead>
                <tr>
                    <th>Reference No.</th>
                    <th>Program</th>
                    <th>Requisition</th>
                    <th>Issue No.</th>
                    <th>G.R.N.</th>
                    <th>Commodity</th>
                    <th>Source</th>
                    <th>Destination</th>
                    <th>Received Qty.</th>
                    <th>Tarrif</th>
                    <th>Shortage Qty.</th>
                    <th>Shortage Birr</th>
                    <th>Freight Charge</th>
                    <th>Status</th>
                    <th>Actions</th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            @foreach (TransporterPaymentRequestViewModel item in Model)
            {
                index++;
                var state = item.BusinessProcess.CurrentState.BaseStateTemplate;
                //if (state.Name == "Payment Requested" || state.Name == "Request Verified")
                //{
                <tr>
                    <td>
                        @item.ReferenceNo
                    </td>
                    <td>
                        @item.Program.Name
                    </td>
                    <td>
                        @item.RequisitionNo
                    </td>
                    <td>
                        @item.GIN
                    </td>
                    <td>
                        @item.GRN
                    </td>
                    <td>
                        @item.Commodity
                    </td>
                    <td>
                        @item.Source
                    </td>
                    <td>
                        @item.Destination
                    </td>
                    <td class="item_receivedqty num">
                        @item.ReceivedQty
                    </td>
                    <td class="num">
                        @item.Tarrif.ToString("0.00")
                    </td>
                    <td class="item_shortageqty num">
                        @item.ShortageQty
                    </td>
                    <td class="item_shortagebirr num">
                        @item.ShortageBirr
                    </td>
                    <td class="item_freightcharge num">
                        @item.FreightCharge.ToString("0.00")
                    </td>
                    <td>
                        @state.Name
                    </td>
                    <td>
                        @*<a href="@Url.Action("ViewContractAgreement", "ValidatedPaymentRequest", new { transporterID = item.TransportOrder.Transporter.TransporterID })">Contract Agreement</a> &nbsp;&nbsp;*@
                        
                        @*<a href="@Url.Action("LabourCost", "ValidatedPaymentRequest")">Labour Cost</a>*@
                        @if (item.ShortageQty>0)
                        {
                            if (state.StateNo == 0)
                            {
                                <button class="btn" data-ng-click="loadCommodityTarrif(@item.TransporterPaymentRequestID, '@item.Commodity')">Commodity Price</button>
                            }
                        }
                    </td>
                    <td>
                        <button class="btn" data-ng-click="loadLossAmount(@item.TransporterPaymentRequestID, '@item.Commodity')">Loss</button>
                    </td>
                    <td>
                        @if (item.ShortageBirr != (decimal)0.00 || item.ShortageQty == (decimal)0.00)
                        {
                            <div class="btn-group">
                                <button class="btn edit_button" id="action_@index">Workflow</button>
                                <button class="btn  dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    @foreach (FlowTemplate actions in state.InitialStateFlowTemplates)
                                    {
                                        <li class="edit_button"><a href="javascript:promot_workflow(@item.BusinessProcessID ,@actions.FinalStateID,'@actions.Name',@item.TransporterPaymentRequestID)" title="@actions.Name">@actions.Name</a></li>            
                                    }
                                    <li class="divider"></li>
                                    <li class="edit_button"><a href="javascript:workflow_history(@item.BusinessProcessID)">History</a></li>
                                </ul>
                            </div>
                        }
                    </td>
                    <td>
                        <button class="btn" data-ng-click="Reject(@item.TransporterPaymentRequestID)">Reject</button>
                    </td>
                </tr> 
                //}
            }
        </tbody>
            <tfoot>
                <tr style="background-color: rgba(220, 220, 220, 0.47);">
                        <td colspan="7"></td>
                        <td style="text-align: center"><b>Total:</b></td>

                        <td><b><span id="view_receivedqty">0.0</span>@*@Model.Sum(a => a.ReceivedQty)*@</b></td>
                        <td><b>@*@Model.Sum(a => a.Tarrif).ToString("0.00")*@</b> </td>
                        <td><b><span id="view_shortageqty">0.0</span>@*@Model.Sum(a => a.ShortageQty)*@</b></td>
                        <td><b><span id="view_shortagebirr">0.0</span>@*@Model.Sum(a => a.ShortageBirr)*@</b> </td>
                        <td><b><span id="view_freightcharge">0.0</span>@*@Model.Sum(a => a.FreightCharge).ToString("0.00")*@ </b></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td><td></td>
                    </tr>
             </tfoot>
        </table>

        <div id="modalHistory" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="width:600px;" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 id="modalHistoryLabel">Activity History</h4>
            </div>
            <div class="modal-body" id="modalHistoryBody">History</div>
        </div>
        @Html.Partial("~/Views/Shared/_PromotWorkflow.cshtml")
        <script>
            var history_link = "@Url.Action("History", "BusinessProcess", new { Area = "WorkflowManager", id = "0" })";

            function promot_workflow(BusinessProcessID, nextstate, actionname, PaymentRequestID) {
                //alert(PaymentRequestID);
                $('#ParentBusinessProcessID').val(BusinessProcessID);
                $('#stateID').val(nextstate);
                $('#modalPromotionLabel').html(actionname);
                $('#PaymentRequestID').val(PaymentRequestID);
                $('#modalPromotion').modal();
            }
            function workflow_history(BusinessProcessID) {
                $('#modalHistory').modal();
                $('#modalHistoryBody').html("<div style='text-align:center;'> <img src='/content/images/loading.gif'/></div>");
                $.post(history_link + BusinessProcessID, {},
                    function (data) {
                        $("#modalHistoryBody").html(data);
                    }
                );
            }
        </script>

        <script>
            $(document).ready(function () {
                //called when key is pressed in textbox
                $("#CommodityTarrif").keypress(function (e) {
                    //if the letter is not digit then display error and don't type anything
                    if (e.which != 8 && e.which != 0 && (e.which < 46 || e.which > 57) && e.which != 190) {
                        //display error message
                        $("#errmsgCommodityTarrif_Amount").html("Digits Only").show().fadeOut("slow");
                        return false;
                    }
                });
            });
            
            $(document).ready(function () {
                //called when key is pressed in textbox
                $("#lossQty").keypress(function (e) {
                    //if the letter is not digit then display error and don't type anything
                    if (e.which != 8 && e.which != 0 && (e.which < 46 || e.which > 57) && e.which != 190) {
                        //display error message
                        $("#errmsgLossQty_Amount").html("Digits Only").show().fadeOut("slow");
                        return false;
                    }
                });
            });
            

            angular.module('PaymentRequestManagementModule', []).controller('PaymentRequestManagementController', function ($scope, $http) {
                $scope.SelectedLabourInfo = [];
                $scope.SelectedCheckInfo = [];

                $scope.loadCommodityTarrif = function (id, commodity) {
                    //alert('Commodity: ' + commodity);
                    $("#FORMTransporterPaymentRequestID").val(id);
                    $("#CommodityName").val(commodity);
                    wndLabourCostInfo.center().open();
                };



                $scope.loadLossAmount = function (id, commodity) {
                    //alert('Commodity: ' + commodity);
                    $("#FORMTransporterPaymentRequestForLossID").val(id);
                   
                    wndModalLoss.center().open();
                };
                


                $scope.editCommodityTarrif = function () {
                    var data = { "transporterPaymentRequestID": $("#FORMTransporterPaymentRequestID").val(), "commodityTarrif": $("#CommodityTarrif").val() };
                    $http.post(rootDir + 'Logistics/TransporterPaymentRequest/EditCommodityTarrif/', data).
                        success(function (data, status, headers, config) {
                            $("#messageboxCommodityTarrif").html("Saved Successfully!");
                            var timer = 3000;
                            clearTimeout(timer);
                            timer = setTimeout(function () {
                                $("#messageboxCommodityTarrif").html('');
                            }, 30000);
                        }).
                        error(function (data, status, headers, config) {
                            $("#messageboxCommodityTarrif").html("Saving was Unsuccessful!");
                            var timer = 3000;
                            clearTimeout(timer);
                            timer = setTimeout(function () {
                                $("#messageboxPayDeduct").html('');
                            }, 3000);
                        });
                };


                $scope.Reject = function(id) {

                    var result = confirm("Are you sure you want to send this request back to GRN Entry?");
                    if (result) {
                        var data = { "transporterPaymentRequestID": id };
                        $http.post(rootDir + 'Logistics/TransporterPaymentRequest/RejectPaymentRequest/', data).
                            success(function(data, status, headers, config) {

                                location.reload(true);

                            }).
                            error(function(data, status, headers, config) {
                                $("#messageboxCommodityTarrif").html("Rejecting was Unsuccessful!");

                            });
                    }
                };
            });
        //init_datepicker();
        </script>
        
        <script type="text/javascript">
            $(document).ready(function () {
                //filter results based on query
                function filter(selector, query) {
                    query = $.trim(query); //trim white space
                    query = query.replace(/ /gi, '|'); //add OR for regex query
                    var program = $('#program_filter').val();

                    $(selector).each(function () {
                        if (program == "All") {
                            ($(this).find("td:first-child").text().search(new RegExp(query, "i")) < 0) ? $(this).hide().removeClass('visible') : $(this).show().addClass('visible');
                        }
                        else {
                            (($(this).find("td:first-child").text().search(new RegExp(query, "i")) < 0) || ($(this).find("td:nth-child(2)").text().search(new RegExp(program, "i")) < 0)) ? $(this).hide().removeClass('visible') : $(this).show().addClass('visible');
                        }
                    });
                    view_total();
                }
                // visible at first
                $('table tbody tr').addClass('visible');
                // visible total at first
                view_total();
                $('#filter').keyup(function (event) {
                    filter('table>tbody>tr', $(this).val());
                });
                $('#program_filter').change(function (e) {
                    filter('table>tbody>tr', $('#filter').val());
                });
                function view_total() {
                    var receivedqty = 0.00, shortageqty = 0.00, shortagebirr = 0.00, freightcharge = 0.00;
                    // select all visible rows
                    $("#paymentrequesttable tbody>tr.visible").each(function () {
                        receivedqty += parseFloat($(this).children("td.item_receivedqty").text());
                        shortageqty += parseFloat($(this).children("td.item_shortageqty").text());
                        shortagebirr += parseFloat($(this).children("td.item_shortagebirr").text());
                        freightcharge += parseFloat($(this).children("td.item_freightcharge").text());
                    });
                    // update the total values
                    $("#view_receivedqty").text(receivedqty);
                    $("#view_shortageqty").text(shortageqty);
                    $("#view_shortagebirr").text(shortagebirr);
                    $("#view_freightcharge").text(freightcharge);
                }
            });


        </script>

        <style>
            .table thead tr {
                background: #DDD;
            }
            .table>thead>tr>th {
                padding: 7px;
            }
            
            .table thead th {
                vertical-align: middle;
            }
            .filter_label {
                display: initial;
                padding-left: 10px;
            }
            #program_filter {
                width: 100px;
            }
            #paymentrequesttable tfoot>tr>td, #paymentrequesttable tbody>tr>td.num {
                text-align: right;
            }
        </style>
    </body>
</html>